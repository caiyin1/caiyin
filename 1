添加保存游戏资源文件
# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
# On branch Save_game_feature
# Changes to be committed:
#	modified:   Classes/AppDelegate.cpp
#	modified:   Classes/BB_Bomb/Manager/BackgroundDataManager.cpp
#	modified:   Classes/BB_Bomb/Manager/BombDataManager.cpp
#	new file:   Classes/BB_Bomb/Manager/DataManager.cpp
#	new file:   Classes/BB_Bomb/Manager/DataManager.h
#	modified:   Classes/BB_Bomb/Manager/GameDeploy.cpp
#	modified:   Classes/BB_Bomb/Manager/GameDeploy.h
#	modified:   Classes/BB_Bomb/Scene/BB_GameScene.cpp
#	modified:   Classes/BB_Bomb/Scene/BB_GameScene.h
#	modified:   Classes/BB_Bomb/StructData/BlockData.h
#	modified:   Classes/BB_Bomb/UI/ActionFactoryNode.cpp
#	modified:   Classes/BB_Bomb/UI/BlockNode.cpp
#	modified:   Classes/BB_Bomb/UI/BlockNode.h
#	modified:   Classes/BB_Bomb/UI/BombNode.cpp
#	modified:   Classes/BB_Bomb/UI/BombNode.h
#	modified:   Classes/BB_Bomb/UI/FoodNode.cpp
#	modified:   Classes/BB_Bomb/UI/FortNode.cpp
#	modified:   Classes/BB_Bomb/UI/FortNode.h
#	deleted:    Classes/HelloWorldScene.cpp
#	deleted:    Classes/HelloWorldScene.h
#	new file:   Classes/PhysicsShapeCache.cpp
#	new file:   Classes/PhysicsShapeCache.h
#	new file:   Classes/bailinUtils/BailinBaseLayer.h
#	new file:   Classes/bailinUtils/DialogLayer.cpp
#	new file:   Classes/bailinUtils/DialogLayer.h
#	new file:   Classes/bailinUtils/bailinMacro.h
#	deleted:    Classes/main.cpp
#	deleted:    Classes/main.h
#	deleted:    Classes/resource.h
#	deleted:    Resources/fonts/Marker Felt.ttf
#	deleted:    Resources/fonts/arial.ttf
#	new file:   Resources/res/BB_Bomb/Image/Forts/bb_fort_1.png
#	new file:   Resources/res/BB_Bomb/Image/balls/default.png
#	deleted:    Resources/res/BB_Bomb/Image/bb_arrow1.png
#	deleted:    Resources/res/BB_Bomb/Image/bb_arrow2.png
#	deleted:    Resources/res/BB_Bomb/Image/bb_arrow3.png
#	deleted:    Resources/res/BB_Bomb/Image/bb_arrow4.png
#	new file:   Resources/res/BB_Bomb/Image/bb_background_make_up.png
#	new file:   Resources/res/BB_Bomb/Image/bb_bar.png
#	modified:   Resources/res/BB_Bomb/Image/bb_black_hole.png
#	new file:   Resources/res/BB_Bomb/Image/bb_bomb_background.png
#	deleted:    Resources/res/BB_Bomb/Image/bb_crown.png
#	modified:   Resources/res/BB_Bomb/Image/bb_dotted_line.png
#	deleted:    Resources/res/BB_Bomb/Image/bb_end_carry_on.png
#	deleted:    Resources/res/BB_Bomb/Image/bb_fort.png
#	new file:   Resources/res/BB_Bomb/Image/bb_game_background.png
#	new file:   Resources/res/BB_Bomb/Image/bb_home_background.png
#	new file:   Resources/res/BB_Bomb/Image/bb_home_bottom.png
#	deleted:    Resources/res/BB_Bomb/Image/bb_home_start.png
#	renamed:    Resources/res/BB_Bomb/Image/bb_block_nome.png -> Resources/res/BB_Bomb/Image/bb_prompt_ring.png
#	modified:   Resources/res/BB_Bomb/Image/bb_recycling_button.png
#	renamed:    Resources/res/BB_Bomb/Image/bb_octagon.png -> Resources/res/BB_Bomb/Image/bb_score_background.png
#	new file:   Resources/res/BB_Bomb/Image/bb_settlement.png
#	renamed:    Resources/res/BB_Bomb/Image/bb_bomb.png -> Resources/res/BB_Bomb/Image/blocks/1_1.png
#	renamed:    Resources/res/BB_Bomb/Image/bb_arrow.png -> Resources/res/BB_Bomb/Image/blocks/1_2.png
#	new file:   Resources/res/BB_Bomb/Image/blocks/1_3.png
#	renamed:    Resources/res/BB_Bomb/Image/bb_addFood.png -> Resources/res/BB_Bomb/Image/blocks/2_1.png
#	renamed:    Resources/res/BB_Bomb/Image/bb_block_half.png -> Resources/res/BB_Bomb/Image/blocks/2_2.png
#	new file:   Resources/res/BB_Bomb/Image/blocks/2_3.png
#	renamed:    Resources/res/BB_Bomb/Image/bb_end_block.png -> Resources/res/BB_Bomb/Image/blocks/3_1.png
#	new file:   Resources/res/BB_Bomb/Image/blocks/3_2.png
#	new file:   Resources/res/BB_Bomb/Image/blocks/3_3.png
#	new file:   Resources/res/BB_Bomb/Image/blocks/4_1.png
#	new file:   Resources/res/BB_Bomb/Image/blocks/4_2.png
#	new file:   Resources/res/BB_Bomb/Image/blocks/4_3.png
#	new file:   Resources/res/BB_Bomb/Image/blocks/5_1.png
#	new file:   Resources/res/BB_Bomb/Image/blocks/5_2.png
#	new file:   Resources/res/BB_Bomb/Image/blocks/5_3.png
#	new file:   Resources/res/BB_Bomb/Image/blocks/6_1.png
#	new file:   Resources/res/BB_Bomb/Image/blocks/6_2.png
#	new file:   Resources/res/BB_Bomb/Image/blocks/6_3.png
#	deleted:    Resources/res/BB_Bomb/bmFnt/BB_num.fnt
#	deleted:    Resources/res/BB_Bomb/bmFnt/BB_num.png
#	new file:   Resources/res/BB_Bomb/bmFnt/block_hp.fnt
#	new file:   Resources/res/BB_Bomb/bmFnt/block_hp.png
#	new file:   Resources/res/BB_Bomb/bmFnt/golden_score.fnt
#	new file:   Resources/res/BB_Bomb/bmFnt/golden_score.png
#	new file:   Resources/res/BB_Bomb/physicsBody/bb_octagon.plist
#	new file:   Resources/res/BB_Bomb/physicsBody/physics.plist
#
# ------------------------ >8 ------------------------
# Do not touch the line above.
# Everything below will be removed.
diff --git a/BB_Bomb/Classes/AppDelegate.cpp b/BB_Bomb/Classes/AppDelegate.cpp
index 0c40f4c..2fa61db 100644
--- a/BB_Bomb/Classes/AppDelegate.cpp
+++ b/BB_Bomb/Classes/AppDelegate.cpp
@@ -1,6 +1,6 @@
 ﻿#include "AppDelegate.h"
 #include "BB_Bomb/Scene/BB_GameScene.h"
-#include "HelloWorldScene.h"
+#include "BB_Bomb/Manager/GameDeploy.h"
 
 
 // #define USE_AUDIO_ENGINE 1
@@ -19,12 +19,8 @@ using namespace CocosDenshion;
 #endif
 
 USING_NS_CC;
-#if defined(SVB_VERTICAL_SCREEN)
-static cocos2d::Size designResolutionSize = cocos2d::Size(1080, 1920);
-#else
-static cocos2d::Size designResolutionSize = cocos2d::Size(1920, 1080);
-#endif
 
+static cocos2d::Size designResolutionSize = cocos2d::Size(640, 1136);
 
 AppDelegate::AppDelegate()
 {
@@ -62,17 +58,9 @@ bool AppDelegate::applicationDidFinishLaunching() {
 	auto glview = director->getOpenGLView();
 	if (!glview) {
 #if (CC_TARGET_PLATFORM == CC_PLATFORM_WIN32)  || (CC_TARGET_PLATFORM == CC_PLATFORM_LINUX)
-#if defined(SVB_VERTICAL_SCREEN)
-		glview = GLViewImpl::createWithRect("BB_Bomb", cocos2d::Rect(0, 0, 540, 960));
-#else
-		glview = GLViewImpl::createWithRect("BB_Bomb", cocos2d::Rect(0, 0, 960, 540));
-#endif
+		glview = GLViewImpl::createWithRect("BB_Bomb", cocos2d::Rect(0, 0, 320, 620));
 #elif CC_TARGET_PLATFORM == CC_PLATFORM_MAC
-#if defined(SVB_VERTICAL_SCREEN)
-		glview = GLViewImpl::createWithRect("BB_Bomb", cocos2d::Rect(0, 0, 360, 720));
-#else
-		glview = GLViewImpl::createWithRect("BB_Bomb", cocos2d::Rect(0, 0, 720, 360));
-#endif
+		glview = GLViewImpl::createWithRect("BB_Bomb", cocos2d::Rect(0, 0, 320, 568));
 #else
 		glview = GLViewImpl::create("BB_Bomb");
 #endif
@@ -93,11 +81,7 @@ bool AppDelegate::applicationDidFinishLaunching() {
 
 	glview->setDesignResolutionSize(frameSize.width, frameSize.height, ResolutionPolicy::SHOW_ALL);
 
-#if defined(SVB_VERTICAL_SCREEN)
 	director->setContentScaleFactor(designResolutionSize.width / frameSize.width);
-#else
-	director->setContentScaleFactor(designResolutionSize.height / frameSize.height);
-#endif
 	//if (frameSize.width / frameSize.height > designResolutionSize.width / designResolutionSize.height)
 	//{
 	//	director->setContentScaleFactor(designResolutionSize.height / frameSize.height);
@@ -118,8 +102,15 @@ bool AppDelegate::applicationDidFinishLaunching() {
 	return true;
 }
 
+
 // This function will be called when the app is inactive. Note, when receiving a phone call it is invoked.
 void AppDelegate::applicationDidEnterBackground() {
+	// 发送一个事件
+	auto director = Director::getInstance();
+	auto pScene = director->getRunningScene();
+
+	pScene->getEventDispatcher()->dispatchCustomEvent(SAVE_GAME_SCHEDULE_EVENT);
+
 	Director::getInstance()->stopAnimation();
 
 #if USE_AUDIO_ENGINE
diff --git a/BB_Bomb/Classes/BB_Bomb/Manager/BackgroundDataManager.cpp b/BB_Bomb/Classes/BB_Bomb/Manager/BackgroundDataManager.cpp
index f3a0d49..fffc519 100644
--- a/BB_Bomb/Classes/BB_Bomb/Manager/BackgroundDataManager.cpp
+++ b/BB_Bomb/Classes/BB_Bomb/Manager/BackgroundDataManager.cpp
@@ -24,34 +24,112 @@ void BackgroundDataManager::init()
 	m_nFoodSize = 1;
 }
 
-void BackgroundDataManager::addBackData()
+// 根据百分比得到当前是什么类型的块块
+static BlockData::Type getBlockType()
 {
-	// 获取生成块块的概率
+	// 默认为空
+	BlockData::Type eType = BlockData::Type::Type_None;
+
+	// TODO: 先得到所有块块的生成概率，把所有概率累加起来
+
+	// TODO: 随机一个数，得到对应分布的块块区段
+
+	// TODO: 返回对应的块块类型
+	// 获取游戏配置
 	auto pGameDeploy = GameDeploy::getInstance();
+	// 获取生成块块的概率
 	// 获取正方形的身材概率
-	float fNomeBlockProBaility = pGameDeploy->getAddNomeBlockProbaility();
+	int nNomeBlockProBaility = pGameDeploy->getAddCubeBlockProbaility();
 	// 获取三角形的生成概率
-	float fTriangleBlockProBaility = pGameDeploy->getTriangleBlockAddProbaility();
+	int nTriangleBlockProBaility = pGameDeploy->getTriangleBlockAddProbaility();
 	// 获取黑洞的生成概率
-	float fBlackHoleProbaility = pGameDeploy->getBlackHoleBlockAddProbaility();
+	int nBlackHoleProbaility = pGameDeploy->getBlackHoleBlockAddProbaility();
+	// 获取无块块的生成概率
+	int nNormalBlockProbaility = pGameDeploy->getNormalBlockProbaility();
+	// 获取八边形块块
+	int nOctagonBlockProbaility = pGameDeploy->getOctagonBlockProbaility();
+	// 获取块块的概率和
+	int nTotalTatio = pGameDeploy->getTotalRatio();
+	int nSum = nNormalBlockProbaility + nTotalTatio;
+	int nNum = random(0, nSum);
+	if (nNum > nNormalBlockProbaility)
+	{
+		nNum = random(1, nTotalTatio);
+		if (nNum < nNomeBlockProBaility)
+		{
+			eType = BlockData::Type::Type_Cube;
+		}
+		else if (nNum < nNomeBlockProBaility + nTriangleBlockProBaility)
+		{
+			eType = BlockData::Type::Type_Triangle;
+		}
+		else if (nNum < nNomeBlockProBaility + nTriangleBlockProBaility + nBlackHoleProbaility)
+		{
+			eType = BlockData::Type::Type_BlackHole;
+		}
+		else if (nNum <= nNomeBlockProBaility + nTriangleBlockProBaility + nBlackHoleProbaility + nOctagonBlockProbaility)
+		{
+			eType = BlockData::Type::Type_Octagon;
+		}
+	}
+
+	return eType;
+}
+
+void BackgroundDataManager::addBackData()
+{
+	// 获取生成块块的概率
+	auto pGameDeploy = GameDeploy::getInstance();
+
 	// 获取块块的生命值
 	int nBLockHP = pGameDeploy->getBlockHP();
 	// 获取子弹的数量
 	int nBombSize = FortDataManager::getInstance()->getBombSize();
-	// 增加难度
-	if (nBLockHP % 10 == 0)
-	{
-		pGameDeploy->addGameDifficult();
-	}
+	// 增加难度	
+	pGameDeploy->addGameDifficult();
 	// 获取屏幕缩放比
 	float fScalingRatio = pGameDeploy->getScalingRatio();
-	float fSize = BLOCK_SIZE / fScalingRatio;
+	float fSize = BLOCK_SIZE;
 	int nNum = pGameDeploy->getGameColumnNum();
 	for (int i = 0; i < nNum; i++)
 	{
-		int nNum = cocos2d::random(0, 100);
-		// 判断添加食物
-		if (nNum < fNomeBlockProBaility)
+		auto eTpye = getBlockType();
+		switch (eTpye)
+		{
+		case BlockData::Type::Type_None:
+		{
+			// 获取食物的生成概率
+			float fFoodProbaility = pGameDeploy->getAddFoodProbaility();
+			// 添加食物
+			int nNum = cocos2d::random(0, 100);
+			if (fFoodProbaility > nNum && m_nFoodSize <= nBLockHP)
+			{
+				FoodData foodData;
+				foodData.m_eFoodType = FoodData::FoodType::kType_AddBomb;
+				auto pFoodNode = FoodNode::create(foodData);
+				pFoodNode->setPositionX(i * fSize + fSize*0.5f);
+				m_callbackAddBackground(pFoodNode);
+				m_nFoodSize++;
+			}
+		}
+		break;
+		case BlockData::Type::Type_Cube:
+		{
+			BlockData blockData;
+			blockData.m_nHP = nBLockHP;
+			if (nBLockHP % 10 == 0 && nNum % 2 == 0)
+			{
+				blockData.m_nHP = 2 * blockData.m_nHP;
+			}
+			blockData.m_eType = BlockData::Type::Type_Cube;
+			// 添加Block
+			auto pBlockNode = BlockNode::create(blockData);
+			pBlockNode->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
+			pBlockNode->setPositionX(fSize * i + fSize*0.5f);
+			m_callbackAddBackground(pBlockNode);
+		}
+		break;
+		case BlockData::Type::Type_Octagon:
 		{
 			BlockData blockData;
 			blockData.m_nHP = nBLockHP;
@@ -66,7 +144,8 @@ void BackgroundDataManager::addBackData()
 			pBlockNode->setPositionX(fSize * i + fSize*0.5f);
 			m_callbackAddBackground(pBlockNode);
 		}
-		else if (nNum < fTriangleBlockProBaility)
+		break;
+		case BlockData::Type::Type_Triangle:
 		{
 			BlockData blockData;
 			blockData.m_nHP = nBLockHP;
@@ -81,12 +160,12 @@ void BackgroundDataManager::addBackData()
 			pBlockNode->setPositionX(fSize * i + fSize*0.5f);
 			m_callbackAddBackground(pBlockNode);
 		}
-		else if (nNum < fBlackHoleProbaility)
+		break;
+		case BlockData::Type::Type_BlackHole:
 		{
-
-			if (nBombSize < 1 || nBLockHP < 10)
+			if (nBombSize <= 1 || nBLockHP < 10)
 			{
-				return;
+				continue;
 			}
 			BlockData blockData;
 			blockData.m_nHP = nBombSize / 2;
@@ -96,21 +175,7 @@ void BackgroundDataManager::addBackData()
 			pBlockNode->setPositionX(fSize * i + fSize * 0.5f);
 			m_callbackAddBackground(pBlockNode);
 		}
-		else
-		{
-			// 获取食物的生成概率
-			float fFoodProbaility = pGameDeploy->getAddFoodProbaility();
-			// 添加食物
-			int nNum = cocos2d::random(0, 100);
-			if (fFoodProbaility > nNum && m_nFoodSize <= nBLockHP)
-			{
-				FoodData foodData;
-				foodData.m_eFoodType = FoodData::FoodType::kType_AddBomb;
-				auto pFoodNode = FoodNode::create(foodData);
-				pFoodNode->setPositionX(i * fSize + fSize*0.5f);
-				m_callbackAddBackground(pFoodNode);
-				m_nFoodSize++;
-			}
+		break;
 		}
 	}
 	// 添加Block的生命值
diff --git a/BB_Bomb/Classes/BB_Bomb/Manager/BombDataManager.cpp b/BB_Bomb/Classes/BB_Bomb/Manager/BombDataManager.cpp
index 382bbb0..95e4fb5 100644
--- a/BB_Bomb/Classes/BB_Bomb/Manager/BombDataManager.cpp
+++ b/BB_Bomb/Classes/BB_Bomb/Manager/BombDataManager.cpp
@@ -21,6 +21,7 @@ void BombDataManager::init()
 
 	// 清空数据
 	m_vBombNode.clear();
+	m_vFlyBombNode.clear();
 
 }
 
diff --git a/BB_Bomb/Classes/BB_Bomb/Manager/DataManager.cpp b/BB_Bomb/Classes/BB_Bomb/Manager/DataManager.cpp
new file mode 100644
index 0000000..c05ca4e
--- /dev/null
+++ b/BB_Bomb/Classes/BB_Bomb/Manager/DataManager.cpp
@@ -0,0 +1,55 @@
+﻿//#include "DataManager.h"
+//
+//void DataManager::saveRecord()
+//{
+//	// 转化为json格式 加密存档
+//}
+//
+//bool DataManager::readingFiles()
+//{
+//	bool bRet = false;
+//	do
+//	{
+//		// 读取文件并写入
+//		// 无文件直接break
+//
+//		// 删除存档文件
+//		bRet = true;
+//	} while (0);
+//	return bRet;
+//}
+//
+//const int& DataManager::getBombSize()
+//{
+//	return m_nBombSize;
+//}
+//
+//const int& DataManager::getNeedShootBombSize()
+//{
+//	return m_nNeedShootBomb;
+//}
+//
+//const int& DataManager::getScore()
+//{
+//	return m_nScore;
+//}
+//
+//const std::vector<DataManager::SpeedAndPoint>& DataManager::getBombSpeedAndPoint()
+//{
+//	return m_vBombSpeedAndPoint;
+//}
+//
+//const float& DataManager::getFortPosX()
+//{
+//	return m_fFortPosX;
+//}
+//
+//const std::vector<cocos2d::Vec2>& DataManager::getFoodPos()
+//{
+//	return m_vFoodPoint;
+//}
+//
+//const std::vector<DataManager::BlockSaveData>& DataManager::getBlockSaveData()
+//{
+//	return m_vBlockSaveData;
+//}
diff --git a/BB_Bomb/Classes/BB_Bomb/Manager/DataManager.h b/BB_Bomb/Classes/BB_Bomb/Manager/DataManager.h
new file mode 100644
index 0000000..132788f
--- /dev/null
+++ b/BB_Bomb/Classes/BB_Bomb/Manager/DataManager.h
@@ -0,0 +1,105 @@
+﻿//#ifndef __DATA_MANAGER_H__
+//#define __DATA_MANAGER_H__
+//#include "cocos2d.h"
+//// #include <vector.h>
+//#include <string>
+//#include "GameDeploy.h"
+//#include "GameStatusManager.h"
+//#include "../StructData/BlockData.h"
+//
+//
+//class DataManager
+//{
+//public:
+//	static DataManager* getInstance();
+//	void init();
+//public:
+//	// 子弹数度和位置
+//	class SpeedAndPoint
+//	{
+//	public:
+//		cocos2d::Vec2 m_speed;
+//		cocos2d::Vec2 m_point;
+//	};
+//public:
+//	// 块块保存的数据
+//	class BlockSaveData
+//	{
+//	public:
+//		// 块块属性
+//		BlockData::Type m_eType;
+//		// 块块位置
+//		cocos2d::Vec2 m_pos;
+//		// 块块生命值
+//		int m_nHp;
+//	};
+//public:
+//	/*
+//	* @brief 存档
+//	*/
+//	void saveRecord();
+//	/*
+//	* @brief 读取本地文件
+//	* @retrun 本地有文件返回 true，反之返回false
+//	*/
+//	bool readingFiles();
+//public:
+//	/*
+//	* @brief 获取子弹数
+//	*/
+//	const int& getBombSize();
+//	/*
+//	* @brief 获取需要发射的子弹数
+//	*/
+//	const int& getNeedShootBombSize();
+//	/*
+//	* @brief 获取当前得分
+//	*/
+//	const int& getScore();
+//	/*
+//	* @brief 获取子弹速度位置
+//	*/
+//	const std::vector<DataManager::SpeedAndPoint>& getBombSpeedAndPoint();
+//	/*
+//	* @brief 获取炮台x轴位置
+//	*/
+//	const float& getFortPosX();
+//	/*
+//	* @brief 获取食物位置
+//	*/
+//	const std::vector<cocos2d::Vec2>& getFoodPos();
+//	/*
+//	* @brief 获取块块数据
+//	*/
+//	const std::vector<DataManager::BlockSaveData>& getBlockSaveData();
+//private:
+//	// 子弹总数
+//	int m_nBombSize;
+//	// 需要发射的子弹数
+//	int m_nNeedShootBomb;
+//	// 当前得分
+//	int m_nScore;
+//	// 子弹的速度和位置
+//	std::vector<SpeedAndPoint >& m_vBombSpeedAndPoint;
+//	// 炮台x轴位置
+//	float m_fFortPosX;
+//	// 食物位置
+//	std::vector<cocos2d::Vec2>& m_vFoodPoint;
+//	// 块块数据
+//	std::vector<BlockSaveData>& m_vBlockSaveData;
+//	// 黑洞块块概率
+//	int m_nBlackHoleBlockProbaility;
+//	// 三角形块块概率
+//	int m_nTriangleBlockProbaility;
+//	// 八边形块块概率
+//	int m_nOctagonBlockGenerateRate;
+//	// 正方形块块概率
+//	int m_nCubeBlockAddProbaility;
+//	// 块块生命值
+//	int m_nHp;
+//	// 游戏状态
+//	GameStatusManager::GameStatus m_eGameStatus;
+//
+//};
+//
+//#endif  __DATA_MANAGER_H__
diff --git a/BB_Bomb/Classes/BB_Bomb/Manager/GameDeploy.cpp b/BB_Bomb/Classes/BB_Bomb/Manager/GameDeploy.cpp
index 9debcfc..b13a41a 100644
--- a/BB_Bomb/Classes/BB_Bomb/Manager/GameDeploy.cpp
+++ b/BB_Bomb/Classes/BB_Bomb/Manager/GameDeploy.cpp
@@ -16,11 +16,15 @@ void GameDeploy::init()
 
 	// 初始化游戏数据
 	// 正常块块的生成概率
-	m_fNomeBlockAddProbaility = 25;
+	m_nCubeBlockAddProbaility = 320;
+	// 八角形块块的生成概率
+	m_nOctagonBlockGenerateRate = 110;
 	// 三角形块块生成概率
-	m_fTriangleBlockAddProBaility = 10;
+	m_nTriangleBlockAddProBaility = 120;
+	// 无块块生成概率
+	m_nNormalBlockProBaility = 700;
 	// 黑洞块块的生成概率
-	m_fBlackHoleBlockAddProBaility = 5;
+	m_nBlackHoleBlockAddProBaility = 40;
 	// Block的 生命值
 	m_nBlockHP = 1;
 	// 食物的生成概率
@@ -34,10 +38,13 @@ void GameDeploy::init()
 	// 箭头缩放比
 	m_fArrowScalingRatio = 20;
 	// 箭头的极限角度
-	m_fArrowLimitAngle = 20;
+	m_fArrowLimitAngle = 9;
 }
 
-
+int GameDeploy::getTotalRatio()
+{
+	return m_nCubeBlockAddProbaility + m_nOctagonBlockGenerateRate + m_nTriangleBlockAddProBaility + m_nBlackHoleBlockAddProBaility;
+}
 
 void GameDeploy::setScalingRatio(float fScalingRatio)
 {
@@ -49,9 +56,9 @@ float GameDeploy::getScalingRatio()
 	return m_fScalingRatio;
 }
 
-float GameDeploy::getAddNomeBlockProbaility()
+int GameDeploy::getAddCubeBlockProbaility()
 {
-	return m_fNomeBlockAddProbaility;
+	return m_nCubeBlockAddProbaility;
 }
 
 int GameDeploy::getBlockHP()
@@ -81,29 +88,36 @@ float GameDeploy::getMoveScalingRatio()
 
 float GameDeploy::getBombSpeed()
 {
-	return m_fBombSpeed;
+	return m_fBombSpeed / m_fScalingRatio;
 }
 
-float GameDeploy::getTriangleBlockAddProbaility()
+int GameDeploy::getTriangleBlockAddProbaility()
 {
-	return m_fTriangleBlockAddProBaility + m_fNomeBlockAddProbaility;
+	return m_nTriangleBlockAddProBaility;
 }
 
 
-float GameDeploy::getBlackHoleBlockAddProbaility()
+int GameDeploy::getNormalBlockProbaility()
 {
-	return m_fBlackHoleBlockAddProBaility + m_fTriangleBlockAddProBaility + m_fNomeBlockAddProbaility;
+	return m_nNormalBlockProBaility;
 }
 
-void GameDeploy::addGameDifficult()
+
+int GameDeploy::getOctagonBlockProbaility()
 {
-	if (m_fNomeBlockAddProbaility > 45)
-	{
-		return;
-	}
-	m_fNomeBlockAddProbaility += 2;
-	m_fTriangleBlockAddProBaility += 1;
+	return m_nOctagonBlockGenerateRate;
+}
+
+int GameDeploy::getBlackHoleBlockAddProbaility()
+{
+	return m_nBlackHoleBlockAddProBaility;
+}
 
+void GameDeploy::addGameDifficult()
+{
+	m_nBlackHoleBlockAddProBaility += 2;
+	m_nOctagonBlockGenerateRate += 3;
+	m_nTriangleBlockAddProBaility += 3;
 }
 
 void GameDeploy::setGameColumnNun(float fSize)
@@ -113,7 +127,7 @@ void GameDeploy::setGameColumnNun(float fSize)
 		// CCLOG("Error : setGameColunmNum = 0");
 		return;
 	}
-	m_nGameColumnNum = fSize / (BLOCK_SIZE / m_fScalingRatio);
+	m_nGameColumnNum = fSize / BLOCK_SIZE;
 }
 
 int GameDeploy::getGameColumnNum()
@@ -130,3 +144,13 @@ float GameDeploy::getArrowLimitAngle()
 {
 	return m_fArrowLimitAngle;
 }
+
+void GameDeploy::setGameLayerSize(const cocos2d::Size& gameLayerSize)
+{
+	m_gameLayerSize = gameLayerSize;
+}
+
+const cocos2d::Size& GameDeploy::getInterfaceSize()
+{
+	return m_gameLayerSize;
+}
diff --git a/BB_Bomb/Classes/BB_Bomb/Manager/GameDeploy.h b/BB_Bomb/Classes/BB_Bomb/Manager/GameDeploy.h
index 00495d5..08c5dd6 100644
--- a/BB_Bomb/Classes/BB_Bomb/Manager/GameDeploy.h
+++ b/BB_Bomb/Classes/BB_Bomb/Manager/GameDeploy.h
@@ -1,6 +1,8 @@
 ﻿#ifndef __GAME_DEPLOY_H__
 #define __GAME_DEPLOY_H__
 
+#include "cocos2d.h"
+
 #define USER_NAME "NAME"
 // 子弹编号
 #define BOMB_TAG_NUM 1
@@ -13,9 +15,15 @@
 // 食物的编号
 #define FOOD_TAG_NUM 4
 // 格子的标准大小
-#define BLOCK_SIZE 135
+#define BLOCK_SIZE (80 / cocos2d::Director::getInstance()->getContentScaleFactor())
 // 爆炸效果事件名称
 #define BLOCK_EVENT "ParticleRatio_Block"
+// 保存游戏事件
+#define  SAVE_GAME_SCHEDULE_EVENT "save_game_SCHEDULE_EVENT"
+// 块块字体路径
+#define BLOCK_NUM_BMFNT "res/BB_Bomb/bmFnt/block_hp.fnt"
+// 分数字体路径
+#define GOLDEN_SCORE_BMFNT "res/BB_Bomb/bmFnt/golden_score.fnt"
 
 // 字体
 #if defined(CC_PLATFORM_IOS) || defined(CC_PLATFORM_MAC)
@@ -40,9 +48,9 @@ public:
 	*/
 	float getScalingRatio();
 	/*
-	* @brief 获取块块的生成概率
+	* @brief 获取正方形块块的生成概率
 	*/
-	float getAddNomeBlockProbaility();
+	int getAddCubeBlockProbaility();
 	/*
 	* @brief 获取块块的生命值
 	*/
@@ -71,11 +79,19 @@ public:
 	/*
 	* @brief 获取三角形Block的生成概率
 	*/
-	float getTriangleBlockAddProbaility();
+	int getTriangleBlockAddProbaility();
+	/*
+	* @brief 获取无block的概率
+	*/
+	int getNormalBlockProbaility();
+	/*
+	* @brief 获取八边形块块生成概率
+	*/
+	int getOctagonBlockProbaility();
 	/*
 	* @brief 获取黑洞的生成概率
 	*/
-	float getBlackHoleBlockAddProbaility();
+	int getBlackHoleBlockAddProbaility();
 	/*
 	* @brief 增加游戏难度
 	*/
@@ -96,17 +112,32 @@ public:
 	* @brief 获取箭头的极限角度
 	*/
 	float getArrowLimitAngle();
+	/*
+	* @brief 设置游戏界面尺寸
+	*/
+	void setGameLayerSize(const cocos2d::Size& gameLayerSize);
+	/*
+	* @brief 获取界面尺寸
+	*/
+	const cocos2d::Size& getInterfaceSize();
+
+	// 得到所有概率配置总和，可能超过100%
+	int getTotalRatio();
 private:
 	// 游戏缩放比
 	float m_fScalingRatio;
 	// 游戏块块的列数
 	int m_nGameColumnNum;
 	// 正常块块生成的概率
-	float m_fNomeBlockAddProbaility;
+	int m_nCubeBlockAddProbaility;
+	// 八角形块块
+	int m_nOctagonBlockGenerateRate;
 	// 三角形块块的生成概率
-	float m_fTriangleBlockAddProBaility;
+	int m_nTriangleBlockAddProBaility;
+	// 无块块的概率
+	int m_nNormalBlockProBaility;
 	// 黑洞块块的生成概率
-	float m_fBlackHoleBlockAddProBaility;
+	int m_nBlackHoleBlockAddProBaility;
 	// 黑洞块块的Hp
 	int m_nBlackHoleBlockHp;
 	// 块块的Hp
@@ -124,5 +155,9 @@ private:
 	float m_fArrowScalingRatio;
 	// 箭头的极限角度
 	float m_fArrowLimitAngle;
+private:
+	// 游戏界面的尺寸
+	cocos2d::Size m_gameLayerSize;
+
 };
 #endif // !__GAME_DEPLOY_H__
diff --git a/BB_Bomb/Classes/BB_Bomb/Scene/BB_GameScene.cpp b/BB_Bomb/Classes/BB_Bomb/Scene/BB_GameScene.cpp
index 754087f..bdea8e1 100644
--- a/BB_Bomb/Classes/BB_Bomb/Scene/BB_GameScene.cpp
+++ b/BB_Bomb/Classes/BB_Bomb/Scene/BB_GameScene.cpp
@@ -11,9 +11,13 @@
 #include "../Util/ColorUtil.h"
 #include "../UI/ActionFactoryNode.h"
 #include "extensions/cocos-ext.h"  
+
+#include "PhysicsShapeCache.h"
+
 USING_NS_CC_EXT;
 USING_NS_CC;
 
+
 /*
 * @brief 根据点数得到不同的颜色
 * @param Block的点数
@@ -59,13 +63,22 @@ bool BB_GameScene::init()
 		GameDeploy::getInstance()->setGameColumnNun(_contentSize.width);
 		// 添加一个游戏开始自定义事件
 		_eventDispatcher->addCustomEventListener(START_GAME_EVENT, CC_CALLBACK_1(BB_GameScene::onStartGameEvent, this));
+		// 添加保存记录事件回调函数
+		_eventDispatcher->addCustomEventListener(SAVE_GAME_SCHEDULE_EVENT, CC_CALLBACK_1(BB_GameScene::onSaveGameScheduleCallBack, this));
 		// 开启碰撞回调事件回调函数
 		auto contactListener = EventListenerPhysicsContact::create();
 		contactListener->onContactBegin = CC_CALLBACK_1(BB_GameScene::onContactBegin, this);
 		_eventDispatcher->addEventListenerWithSceneGraphPriority(contactListener, this);
+
+
 		// 设置添加背景回调函数
 		BackgroundDataManager::getInstance()->setAddBackgroundCallBack(CC_CALLBACK_1(BB_GameScene::addBackgroundCallBack, this));
+
+
 		initHomeLayer();
+
+		// 初始化刚体缓存
+		PhysicsShapeCache::getInstance()->addShapesWithFile("res/BB_Bomb/PhysicsBody/physics.plist", CC_CONTENT_SCALE_FACTOR());
 		bRet = true;
 	} while (0);
 	return bRet;
@@ -76,6 +89,12 @@ void BB_GameScene::onEnter()
 	Scene::onEnter();
 
 	createTouchListener();
+	// 创建背景补边
+	auto pS9BackgroundMakeUp = ui::Scale9Sprite::create("res/BB_Bomb/Image/bb_background_make_up.png");
+	pS9BackgroundMakeUp->setPreferredSize(_contentSize);
+	pS9BackgroundMakeUp->setPosition(_contentSize * 0.5f);
+	addChild(pS9BackgroundMakeUp, -1);
+
 }
 
 void BB_GameScene::createTouchListener()
@@ -87,7 +106,6 @@ void BB_GameScene::createTouchListener()
 	m_pEventListenerTouch->onTouchEnded = CC_CALLBACK_2(BB_GameScene::onTouchEnded, this);
 
 	_eventDispatcher->addEventListenerWithSceneGraphPriority(m_pEventListenerTouch, this);
-
 }
 
 bool BB_GameScene::onTouchBegin(cocos2d::Touch* touch, cocos2d::Event* ev)
@@ -114,10 +132,30 @@ bool BB_GameScene::onTouchBegin(cocos2d::Touch* touch, cocos2d::Event* ev)
 void BB_GameScene::initHomeLayer()
 {
 	m_pHomeLayer = Layer::create();
-	addChild(m_pHomeLayer);
 	// 获取玩家数据
 	auto pUserData = UserDataManager::getInstance();
 
+
+	// 添加背景图片
+	auto pBackgroundSprite = Sprite::create("res/BB_Bomb/Image/bb_home_background.png");
+	auto backgroundRect = pBackgroundSprite->getBoundingBox();
+	pBackgroundSprite->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
+	pBackgroundSprite->setScale(_contentSize.width / backgroundRect.size.width);
+	// 获取界面尺寸
+	auto interfaceRect = pBackgroundSprite->getBoundingBox();
+	// 设置界面尺寸
+	GameDeploy::getInstance()->setGameLayerSize(interfaceRect.size);
+	// 设置界面的Layer
+	m_pHomeLayer->setContentSize(interfaceRect.size);
+	m_pHomeLayer->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
+#if COCOS2D_VERSION > 0x0030330
+	m_pHomeLayer->setIgnoreAnchorPointForPosition(false);
+#else
+	m_pHomeLayer->ignoreAnchorPointForPosition(false);
+#endif
+	m_pHomeLayer->setPosition(_contentSize * 0.5f);
+	addChild(m_pHomeLayer);
+
 	// 添加一个点击任意一处 开始
 	auto pStartMenu = Menu::create();
 	auto pStartButton = MenuItemImage::create();
@@ -125,42 +163,68 @@ void BB_GameScene::initHomeLayer()
 	pStartButton->setCallback(CC_CALLBACK_1(BB_GameScene::menuStartCallBack, this));
 	pStartMenu->addChild(pStartButton);
 	m_pHomeLayer->addChild(pStartMenu);
-	// 添加游戏名称
-	float fScalingRatio = GameDeploy::getInstance()->getScalingRatio();
-	auto pGameNameLabel = Label::createWithSystemFont(bailinText("BB弹"), FNT_NAME, 400 / fScalingRatio);
-
-	pGameNameLabel->setPosition(_contentSize.width * 0.5f, _contentSize.height * 0.8f);
-	m_pHomeLayer->addChild(pGameNameLabel);
-	// 黄冠
-	// 添加历史最高分前面的皇冠
-	auto pCrownSprite = Sprite::create("res/BB_Bomb/Image/bb_crown.png");
-	pCrownSprite->setAnchorPoint(Vec2::ANCHOR_BOTTOM_LEFT);
-	pCrownSprite->setPosition(10 / fScalingRatio, 0);
-	// 设置颜色
-	pCrownSprite->setColor(Color3B(255, 253, 16));
+
+	pBackgroundSprite->setPosition(interfaceRect.size * 0.5f);
+	pBackgroundSprite->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
+	backgroundRect = pBackgroundSprite->getBoundingBox();
+	m_pHomeLayer->addChild(pBackgroundSprite);
+	// 获取背景的Rect
+	backgroundRect = pBackgroundSprite->getBoundingBox();
+	//// 获取屏幕缩放比
+	auto fScalingRatio = GameDeploy::getInstance()->getScalingRatio();
+	// 字体的大小
+	float fFontSize = 30 / fScalingRatio;
+	auto pScoreLabel = Label::createWithSystemFont(bailinText("最高分"), FNT_NAME, fFontSize);
+	auto scoreRect = pScoreLabel->getBoundingBox();
 	// 添加蛇历史最高分
-	auto pHistoryScoreLabel = Label::createWithSystemFont(StringUtils::format("%d", pUserData->getHighScore()), FNT_NAME, 100 / fScalingRatio);
-	pHistoryScoreLabel->setAnchorPoint(Vec2::ANCHOR_MIDDLE_RIGHT);
-	pHistoryScoreLabel->setColor(Color3B(255, 253, 16));
-	// 创建一个Node 使score和皇冠永远居中
-	auto pNode = Node::create();
-	// 获取皇冠的boundingBox
-	auto crownRect = pCrownSprite->getBoundingBox();
-	// 获取scoreLabel的boundingBox
-	auto scoreLabelRect = pHistoryScoreLabel->getBoundingBox();
-	// 设置Node的大小时 皇冠和score的长度再加上固定的间距
-	pNode->setContentSize(Size(crownRect.size.width + scoreLabelRect.size.width + 30 / fScalingRatio, crownRect.size.height));
-	pNode->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
-	pNode->setPosition(_contentSize.width * 0.5f, _contentSize.height * 0.55f);
-	m_pHomeLayer->addChild(pNode);
-	pHistoryScoreLabel->setPosition(pNode->getContentSize().width, crownRect.size.height * 0.5f);
-	pNode->addChild(pCrownSprite);
-	pNode->addChild(pHistoryScoreLabel);
+	auto nHighScore = pUserData->getHighScore();
+	auto pHistoryScoreLabel = Label::createWithBMFont(GOLDEN_SCORE_BMFNT, StringUtils::format("%d", nHighScore));
+	auto historyScoreRect = pHistoryScoreLabel->getBoundingBox();
+	// 创建存放最高分的Sprite
+	auto pS9HisoryScoreSprite = ui::Scale9Sprite::create("res/BB_Bomb/Image/bb_score_background.png");
+	// 计算Label间的间距
+	float fSpacing = 5 / fScalingRatio;
+	pS9HisoryScoreSprite->setPreferredSize(Size(_contentSize.width * 0.5f, scoreRect.size.height + historyScoreRect.size.height + fSpacing * 2));
+	auto historyScoreNodeSize = pS9HisoryScoreSprite->getContentSize();
+	float fHistoryScoreScale = 1.0f;
+	while (historyScoreRect.size.width + historyScoreRect.size.height * 1.0f > historyScoreNodeSize.width)
+	{
+		pHistoryScoreLabel->setScale(fHistoryScoreScale);
+		fHistoryScoreScale -= 0.01f;
+		historyScoreRect = pHistoryScoreLabel->getBoundingBox();
+	}
+	// 设置Label的位置	
+	pScoreLabel->setAnchorPoint(Vec2::ANCHOR_MIDDLE_TOP);
+	pScoreLabel->setPosition(historyScoreNodeSize.width * 0.5f, historyScoreNodeSize.height - fSpacing);
+	pHistoryScoreLabel->setAnchorPoint(Vec2::ANCHOR_MIDDLE_BOTTOM);
+	auto fSize = historyScoreNodeSize.width * 0.5f;
+	pHistoryScoreLabel->setPosition(historyScoreNodeSize.width * 0.5f, fSpacing);
+	pHistoryScoreLabel->setPosition(fSize, 0);
+	// 添加label
+	pS9HisoryScoreSprite->addChild(pScoreLabel);
+	pS9HisoryScoreSprite->addChild(pHistoryScoreLabel);
+
+	pS9HisoryScoreSprite->setColor(Color3B::BLACK);
+	pS9HisoryScoreSprite->setOpacity(0.5f * 255);
+	pS9HisoryScoreSprite->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
+	pS9HisoryScoreSprite->setPosition(backgroundRect.size.width * 0.5f, backgroundRect.size.height * 0.22f);
+	m_pHomeLayer->addChild(pS9HisoryScoreSprite);
 
-	std::string strTipsImage = "res/BB_Bomb/Image/bb_home_start.png";
-	auto pStartSprite = createPrompt(strTipsImage);
-	pStartSprite->setPosition(_contentSize.width * 0.5f, _contentSize.height * 0.3f);
-	m_pHomeLayer->addChild(pStartSprite);
+	// 创建点击任意开始提示
+	auto pStartLabel = Label::createWithSystemFont(bailinText(" > 点击任意开始 < "), FNT_NAME, 30 / fScalingRatio);
+	auto startLabelSize = pStartLabel->getContentSize();
+	auto pS9StartSprite = ui::Scale9Sprite::create("res/BB_Bomb/Image/bb_score_background.png");
+	pS9StartSprite->setPreferredSize(Size(_contentSize.width * 0.5f, startLabelSize.height + 2 * fSpacing));
+	auto s9StartSpriteSize = pS9StartSprite->getContentSize();
+	// 设置提示位置位置
+	pStartLabel->setAnchorPoint(Vec2::ANCHOR_MIDDLE_BOTTOM);
+	pStartLabel->setPosition(s9StartSpriteSize.width * 0.5f, fSpacing);
+	pS9StartSprite->addChild(pStartLabel);
+	// 设置提示背景
+	pS9StartSprite->setColor(Color3B::BLACK);
+	pS9StartSprite->setOpacity(0.5f * 255);
+	pS9StartSprite->setPosition(interfaceRect.size.width * 0.5f, interfaceRect.size.height * 0.13f);
+	m_pHomeLayer->addChild(pS9StartSprite);
 }
 
 void BB_GameScene::menuStartCallBack(cocos2d::Ref* spender)
@@ -187,9 +251,12 @@ void BB_GameScene::onStartGameEvent(cocos2d::EventCustom* event)
 
 void BB_GameScene::initGameData()
 {
-	m_nBombNum = m_nScore = 1;
+	m_nBombNum = 1;
+	m_nScore = 1;
 	m_nMoveBombNum = 0;
 	m_nAlreadyShootBombNum = 0;
+	// 得分label的缩放比例
+	m_fScoreLabelScale = 1.0f;
 	m_nTimer = 0;
 	m_bMoveFort = false;
 	// 初始化子弹数据
@@ -212,77 +279,116 @@ void BB_GameScene::onExit()
 
 void BB_GameScene::initGameLayer()
 {
+	// 获取游戏配置
+	auto pGameDeploy = GameDeploy::getInstance();
+	// 获取有效界面尺寸
+	auto interfaceSize = pGameDeploy->getInterfaceSize();
 	m_pGameLayer = Layer::create();
+	m_pGameLayer->setContentSize(interfaceSize);
+	m_pGameLayer->setPosition(_contentSize * 0.5f);
+#if COCOS2D_VERSION > 0x0030330
+	m_pGameLayer->setIgnoreAnchorPointForPosition(false);
+#else
+	m_pGameLayer->ignoreAnchorPointForPosition(false);
+#endif
+	m_pGameLayer->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
 	addChild(m_pGameLayer);
+	// 创建背景 
+	auto pGameBackgroundSprite = Sprite::create("res/BB_Bomb/Image/bb_game_background.png");
+	auto gameBackgroundRect = pGameBackgroundSprite->getBoundingBox();
+	pGameBackgroundSprite->setScale(_contentSize.width / gameBackgroundRect.size.width);
+	pGameBackgroundSprite->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
+	pGameBackgroundSprite->setPosition(interfaceSize * 0.5f);
+	m_pGameLayer->addChild(pGameBackgroundSprite);
+
 	// 创建碰撞边界线刚体
 	createBroundLine();
+
 	// 初始化炮台
 	m_pFortNode = FortNode::create();
 	m_pFortNode->setAnchorPoint(Vec2::ANCHOR_MIDDLE_BOTTOM);
-	m_pFortNode->setPosition(_contentSize.width * 0.5f, _contentSize.height * 0.1f);
-	m_pGameLayer->addChild(m_pFortNode, 2);
+	m_pFortNode->setPosition(interfaceSize.width * 0.5f, 0);
+	m_pGameLayer->addChild(m_pFortNode, 1);
 	// 设置炮台位置
 	FortDataManager::getInstance()->setFortPosition(m_pFortNode->getPosition());
 	// 初始化子弹Node
 	m_pBombNode = Node::create();
-	m_pBombNode->setContentSize(_contentSize);
+	m_pBombNode->setContentSize(interfaceSize);
 	m_pBombNode->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
-	m_pBombNode->setPosition(_contentSize * 0.5f);
+	m_pBombNode->setPosition(interfaceSize * 0.5f);
 	m_pGameLayer->addChild(m_pBombNode);
 	// 获取屏幕缩放比
 	auto fScalingRatio = GameDeploy::getInstance()->getScalingRatio();
 	// 初始化食物Node
 	m_pFoodNode = Node::create();
-	m_pFoodNode->setContentSize(_contentSize);
-	m_pFoodNode->setPosition(_contentSize * 0.5f);
+	m_pFoodNode->setContentSize(interfaceSize);
+	m_pFoodNode->setPosition(interfaceSize * 0.5f);
 	m_pFoodNode->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
 	m_pGameLayer->addChild(m_pFoodNode, 2);
 	// 初始化Block的Node
 	m_pBlockNode = Node::create();
-	m_pBlockNode->setContentSize(_contentSize);
+	m_pBlockNode->setContentSize(interfaceSize);
 	m_pBlockNode->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
-	m_pBlockNode->setPosition(_contentSize * 0.5f);
+	m_pBlockNode->setPosition(interfaceSize * 0.5f);
 	m_pGameLayer->addChild(m_pBlockNode);
 	// 初始化BlackHole的Node
 	m_pBlackHoleNode = Node::create();
-	m_pBlackHoleNode->setContentSize(_contentSize);
+	m_pBlackHoleNode->setContentSize(interfaceSize);
 	m_pBlackHoleNode->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
-	m_pBlackHoleNode->setPosition(_contentSize * 0.5f);
+	m_pBlackHoleNode->setPosition(interfaceSize * 0.5f);
 	m_pGameLayer->addChild(m_pBlackHoleNode);
 
 	// 初始化玩家得分Label
 	float fLenght = 20 / fScalingRatio;
-	m_pScoreLabel = Label::createWithBMFont(NUM_FILE, StringUtils::format("score : %d", m_nScore));
-	m_pScoreLabel->setAnchorPoint(Vec2::ANCHOR_TOP_RIGHT);
-	m_pScoreLabel->setPosition(_contentSize.width - fLenght, _contentSize.height - fLenght);
+	m_pScoreLabel = Label::createWithBMFont(GOLDEN_SCORE_BMFNT, StringUtils::format("%d", m_nScore));
+	m_pScoreLabel->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
+	m_pScoreLabel->setPosition(gameBackgroundRect.size.width * 0.5f, gameBackgroundRect.size.height * 0.948f);
 	m_pScoreLabel->setColor(Color3B::WHITE);
-	m_pGameLayer->addChild(m_pScoreLabel);
+	pGameBackgroundSprite->addChild(m_pScoreLabel);
 	auto scoreLabelSize = m_pScoreLabel->getContentSize();
-	// 初始化玩家子弹的数量
-	m_pBombNumLabel = Label::createWithSystemFont(bailinText(StringUtils::format("子弹 : %d", m_nBombNum)), FNT_NAME, 50 / fScalingRatio);
-	m_pBombNumLabel->setAnchorPoint(Vec2::ANCHOR_TOP_RIGHT);
-	m_pBombNumLabel->setPosition(_contentSize.width - scoreLabelSize.width - 3 * fLenght, _contentSize.height - fLenght);
-	m_pGameLayer->addChild(m_pBombNumLabel);
-	// 初始化边界线
-	// 上边界线
-	auto pTopDraw = DrawNode::create();
-	pTopDraw->drawSolidRect(Vec2(0, _contentSize.height * 0.9),
-		Vec2(_contentSize.width, _contentSize.height * 0.9 + 10 / fScalingRatio), Color4F::RED);
-	m_pGameLayer->addChild(pTopDraw);
-	// 下边界
-	auto pButtonDraw = DrawNode::create();
-	pButtonDraw->drawSolidRect(Vec2(0, _contentSize.height * 0.1f),
-		Vec2(_contentSize.width, _contentSize.height * 0.1f - 10 / fScalingRatio), Color4F::RED);
-	m_pGameLayer->addChild(pButtonDraw);
+	handleScaleScoreLabel();
+	// 初始化玩家子弹的数量Label 
+	m_pBombNumLabel = Label::createWithBMFont(BLOCK_NUM_BMFNT, StringUtils::format("x%d", m_nBombNum));
+	m_pBombNumLabel->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
+	auto pBombNumBackground = Sprite::create("res/BB_Bomb/Image/bb_bomb_background.png");
+	auto bombNumBackgroundSize = pBombNumBackground->getContentSize();
+	pBombNumBackground->setAnchorPoint(Vec2::ANCHOR_MIDDLE_LEFT);
+	pBombNumBackground->setPosition(0, interfaceSize.height * 0.95f);
+	m_pGameLayer->addChild(pBombNumBackground, 2);
+	// 添加子弹数量Label
+	m_pBombNumLabel->setPosition(bombNumBackgroundSize.width * 0.5f, bombNumBackgroundSize.height* 0.5f);
+	pBombNumBackground->addChild(m_pBombNumLabel);
 
+	// 创建边界
+	// 底边
+	auto pBottomBarSprite = Sprite::create("res/BB_Bomb/Image/bb_bar.png");
+	auto barSize = pBottomBarSprite->getContentSize();
+	pBottomBarSprite->setScale(_contentSize.width / barSize.width);
+	pBottomBarSprite->setAnchorPoint(Vec2::ANCHOR_TOP_LEFT);
+	// pBottomBarSprite->setPosition(0, interfaceSize.height * 0.130f);
+	pBottomBarSprite->setPosition(0, interfaceSize.height * SCREEN_BUTTOM_COFFICIENT);
+	m_pGameLayer->addChild(pBottomBarSprite);
+	// 上边
+	auto pTopBarSprite = Sprite::create("res/BB_Bomb/Image/bb_bar.png");
+	pTopBarSprite->setScale(_contentSize.width / barSize.width);
+	pTopBarSprite->setAnchorPoint(Vec2::ANCHOR_MIDDLE_LEFT);
+	// pTopBarSprite->setPosition(0, interfaceSize.height * 0.846f);
+	pTopBarSprite->setPosition(0, interfaceSize.height * SCREEN_TOP_COFFICIENT);
+	m_pGameLayer->addChild(pTopBarSprite);
+	// 创建按钮
 	createRecyclingBombButton();
 }
 
 void BB_GameScene::createBroundLine()
 {
+	auto pGameDeploy = GameDeploy::getInstance();
+	float fScalingRatio = pGameDeploy->getScalingRatio();
+	// 加粗刚体
+	float fLenght = 50 / fScalingRatio;
+	auto interfaceSize = pGameDeploy->getInterfaceSize();
 	// 上边
-	auto pTopBroundLine = PhysicsBody::createEdgeSegment(Vec2(0, _contentSize.height * 0.9f + 50),
-		Vec2(_contentSize.width, _contentSize.height * 0.9f + 50), PhysicsMaterial(0.0f, 1.0f, 0.0f), 50);
+	auto pTopBroundLine = PhysicsBody::createEdgeSegment(Vec2(0, interfaceSize.height * SCREEN_TOP_COFFICIENT + fLenght),
+		Vec2(interfaceSize.width, interfaceSize.height * SCREEN_TOP_COFFICIENT + fLenght), PhysicsMaterial(0.0f, 1.0f, 0.0f), fLenght);
 	pTopBroundLine->setDynamic(false);
 	// 设置遮掩码
 	pTopBroundLine->setCategoryBitmask(2);
@@ -296,8 +402,10 @@ void BB_GameScene::createBroundLine()
 	m_pGameLayer->addChild(pNodeTop);
 
 	// 左边
-	auto pLeftBroundLine = PhysicsBody::createEdgeSegment(Vec2(0, _contentSize.height * 0.1f),
-		Vec2(0, _contentSize.height * 0.9f), PhysicsMaterial(0.0f, 1.0f, 0.0f));
+	// auto pLeftBroundLine = PhysicsBody::createEdgeSegment(Vec2(0, interfaceSize.height * 0.13f),
+	// Vec2(0, interfaceSize.height * 0.846f), PhysicsMaterial(0.0f, 1.0f, 0.0f));
+	auto pLeftBroundLine = PhysicsBody::createEdgeSegment(Vec2(-fLenght, 0),
+		Vec2(-fLenght, interfaceSize.height * SCREEN_TOP_COFFICIENT), PhysicsMaterial(0.0f, 1.0f, 0.0f), fLenght);
 	// 设置遮掩码
 	pLeftBroundLine->setCategoryBitmask(2);
 	pLeftBroundLine->setContactTestBitmask(8);
@@ -309,8 +417,8 @@ void BB_GameScene::createBroundLine()
 	m_pGameLayer->addChild(pNodeLeft);
 
 	// 右边
-	auto pRightBroundLine = PhysicsBody::createEdgeSegment(Vec2(_contentSize.width, _contentSize.height * 0.1f),
-		Vec2(_contentSize.width, _contentSize.height * 0.9f), PhysicsMaterial(0.0f, 1.0f, 0.0f));
+	auto pRightBroundLine = PhysicsBody::createEdgeSegment(Vec2(interfaceSize.width + fLenght, 0),
+		Vec2(interfaceSize.width + fLenght, interfaceSize.height * SCREEN_TOP_COFFICIENT), PhysicsMaterial(0.0f, 1.0f, 0.0f), fLenght);
 	// 设置遮掩码
 	pRightBroundLine->setCategoryBitmask(2);
 	pRightBroundLine->setContactTestBitmask(8);
@@ -322,8 +430,8 @@ void BB_GameScene::createBroundLine()
 	m_pGameLayer->addChild(pNodeRight);
 
 	//// 下边
-	auto pBottomBroundLine = PhysicsBody::createEdgeSegment(Vec2(0, _contentSize.height * 0.1f),
-		Vec2(_contentSize.width, _contentSize.height * 0.1f), PhysicsMaterial(0.0f, 0.0f, 0.0f));
+	auto pBottomBroundLine = PhysicsBody::createEdgeSegment(Vec2(0, interfaceSize.height * SCREEN_BUTTOM_COFFICIENT),
+		Vec2(interfaceSize.width, interfaceSize.height * SCREEN_BUTTOM_COFFICIENT), PhysicsMaterial(0.0f, 0.0f, 0.0f));
 	// 设置遮掩码
 	pBottomBroundLine->setCategoryBitmask(2);
 	pBottomBroundLine->setContactTestBitmask(4);
@@ -345,30 +453,26 @@ void BB_GameScene::update(float dt)
 	}
 	// 获取游戏状态
 	auto gameStatus = GameStatusManager::getInstance()->getGameStatus();
-	if (gameStatus == GameStatusManager::GameStatus::kStatus_Result || gameStatus == GameStatusManager::GameStatus::kStatus_None)
-	{
-		return;
-	}
-	// 获取游戏配置
-	auto pGameDeploy = GameDeploy::getInstance();
-	int nBombLaunchTimer = pGameDeploy->getBombShootTimer();
-	// 判断是否开启子弹回收按钮
-	if (gameStatus == GameStatusManager::GameStatus::kStatus_Runnning)
-	{
-		setRecyclingBombEnable(true);
-	}
-	else
+	if (gameStatus != GameStatusManager::GameStatus::kStatus_Result && gameStatus != GameStatusManager::GameStatus::kStatus_None)
 	{
-		setRecyclingBombEnable(false);
+		// 判断是否开启子弹回收按钮
+		if (gameStatus == GameStatusManager::GameStatus::kStatus_Runnning)
+		{
+			setRecyclingBombEnable(true);
+		}
+		else
+		{
+			setRecyclingBombEnable(false);
+		}
+		// 创建子弹
+		handleAddBomb();
+		// 发射子弹
+		handleShootBomb();
+		// 处理游戏背景数据
+		handleAddBackground();
+		// 处理屏幕屏幕内容下移动
+		handleRollScreen();
 	}
-	// 创建子弹
-	handleAddBomb();
-	// 发射子弹
-	handleShootBomb();
-	// 处理游戏背景数据
-	handleAddBackground();
-	// 处理屏幕屏幕内容下移动
-	handleRollScreen();
 }
 
 void BB_GameScene::onTouchMoved(cocos2d::Touch* touch, cocos2d::Event* ev)
@@ -385,7 +489,9 @@ void BB_GameScene::onTouchEnded(cocos2d::Touch* touch, cocos2d::Event* ev)
 	auto fRadian = m_pFortNode->getArrowRadian();
 	// 判断是否有效的弧度
 	float fAngle = CC_RADIANS_TO_DEGREES(fRadian);
-	if (fAngle < 20.0f || fAngle > 160.0f)
+	// 获取极限角度
+	auto fLimitAngle = GameDeploy::getInstance()->getArrowLimitAngle();
+	if (fAngle < fLimitAngle || fAngle > 180 - fLimitAngle)
 	{
 		// 不符合射击角度不发射
 		return;
@@ -451,6 +557,7 @@ bool BB_GameScene::onContactBegin(cocos2d::PhysicsContact& contac)
 			auto nNum = random(0, 60);
 			CCLOG("nNum(%d)", nNum);
 			pParticleRatio->setStartColorVar(Color4F(getBlockColorWithNumer(nNum)));
+			pos = m_pGameLayer->convertToWorldSpace(pos);
 			pParticleRatio->setPosition(pos);
 			pParticleRatio->setCascadeColorEnabled(true);
 			pParticleRatio->setScale(1 / fScalingRatio);
@@ -458,10 +565,19 @@ bool BB_GameScene::onContactBegin(cocos2d::PhysicsContact& contac)
 			pParticleRatio->setAutoRemoveOnFinish(true);
 			addChild(pParticleRatio);
 		}
+		// 得分加一
+		m_nScore++;
+		m_pScoreLabel->setString(StringUtils::format("%d", m_nScore));
+		handleScaleScoreLabel();
 	}
 	break;
 	case BOUNDING_TAG_NUM:
 	{
+		if (contac.getContactData()->normal.y >= 0)
+		{
+			// 子弹从下往上穿不判断碰撞
+			return false;
+		}
 		m_nMoveBombNum--;
 		// 获取子弹管理类
 		auto pBombDataManager = BombDataManager::getInstance();
@@ -482,7 +598,7 @@ bool BB_GameScene::onContactBegin(cocos2d::PhysicsContact& contac)
 		a->setEnable(false);
 #else
 		a->setEnabled(false);
-#endif;
+#endif
 		// 移动炮台
 		if (m_bMoveFort)
 		{
@@ -490,12 +606,16 @@ bool BB_GameScene::onContactBegin(cocos2d::PhysicsContact& contac)
 			auto pBombSprite = dynamic_cast<BombNode*>(pANode);
 			// 从飞行的子弹数组中删除这个子弹
 			pBombDataManager->removeFlyBombToVector(pBombSprite);
+			pBombSprite->setOpacity(0);
 			auto pos = a->getPosition();
-			auto pMoveTo = MoveTo::create(0.5f, Vec2(pos.x, _contentSize.height * 0.1f + 20 / fScalingRatio));
+			moveFort(pos.x);
+			// 获取炮台位置
+			auto fortPos = FortDataManager::getInstance()->getForPosition();
+			auto fortNodeSize = m_pFortNode->getContentSize();
+			auto pMoveTo = MoveTo::create(0.5f, Vec2(pos.x, fortPos.y + fortNodeSize.height * 0.5f));
 			auto delayTime = DelayTime::create(0.1f);
 			auto seq = Sequence::create(delayTime, pMoveTo, nullptr);
 			pBombSprite->runAction(seq);
-			moveFort(pos.x);
 			m_bMoveFort = false;
 		}
 		else
@@ -508,9 +628,15 @@ bool BB_GameScene::onContactBegin(cocos2d::PhysicsContact& contac)
 			pBombDataManager->removeFlyBombToVector(pBombNode);
 			if (pBombNode == nullptr)	break;
 			pBombNode->setBombStatus(BombNode::BombStatus::Status_MoveTo);
-			ActionInterval* pMoveTo = MoveTo::create(0.5f, Vec2(pos.x, _contentSize.height * 0.1f + 20 / fScalingRatio));
+			// 获取炮台位置
+			auto fortPos = FortDataManager::getInstance()->getForPosition();
+			auto fortNodeSize = m_pFortNode->getContentSize();
+			auto pMoveTo = MoveTo::create(0.5f, Vec2(pos.x, fortPos.y + fortNodeSize.height * 0.5f));
+
+			// 创建一个动画结束回调函数
+			auto pFun = CallFuncN::create(CC_CALLBACK_1(BB_GameScene::hideBombCallBack, this, pBombNode));
 			auto delayTime = DelayTime::create(0.1f);
-			auto seq = Sequence::create(delayTime, pMoveTo, nullptr);
+			auto seq = Sequence::create(delayTime, pMoveTo, pFun, nullptr);
 			pBombNode->runAction(seq);
 		}
 	}
@@ -529,11 +655,8 @@ bool BB_GameScene::onContactBegin(cocos2d::PhysicsContact& contac)
 		m_pFoodNode->addChild(pFoodAnctionSprite, 20);
 		// 删除原来的食物
 		pFoodNode->reomveFoodNode();
-		// 得分加一
-		m_nScore++;
-		m_pScoreLabel->setString(StringUtils::format("score : %d", m_nScore));
 		// 子弹数量加一
-		m_pBombNumLabel->setString(bailinText(StringUtils::format("子弹 : %d", ++m_nBombNum)));
+		m_pBombNumLabel->setString(bailinText(StringUtils::format("x%d", ++m_nBombNum)));
 	}
 	break;
 	case BLACK_HOLE_TAG_NUM:
@@ -546,6 +669,12 @@ bool BB_GameScene::onContactBegin(cocos2d::PhysicsContact& contac)
 		pBlockNode->hitted();
 		// 获取Block的Hp
 		auto nHp = pBlockNode->getBLockHp();
+
+		// 得分加一
+		m_nScore++;
+		m_pScoreLabel->setString(StringUtils::format("%d", m_nScore));
+		handleScaleScoreLabel();
+
 		if (nHp <= 0)
 		{
 			auto pos = pBlockNode->getPosition();
@@ -555,6 +684,7 @@ bool BB_GameScene::onContactBegin(cocos2d::PhysicsContact& contac)
 			auto nNum = random(0, 60);
 			pParticleRatio->setStartColorVar(Color4F(getBlockColorWithNumer(nNum)));
 			pParticleRatio->setPosition(pos);
+			pos = m_pGameLayer->convertToWorldSpace(pos);
 			pParticleRatio->setCascadeColorEnabled(true);
 			pParticleRatio->setScale(1 / fScalingRatio);
 			pParticleRatio->setLife(4);
@@ -593,9 +723,16 @@ void BB_GameScene::handleShootBomb()
 			auto bombSpeed = pFortDataManger->getBombSpeed();
 			if (m_nAlreadyShootBombNum < pFortDataManger->getBombSize())
 			{
-				// 获取炮台的位置
+				// FIXME: 这里在游戏结束最后的下降动画时操作炮台多点几下会在结算界面弹出后数组访问异常
 				auto pBombNode = vBomb[m_nAlreadyShootBombNum];
+				// 转移子弹到炮口
+				//auto fortTopPos = getFortTopPos();
+				//auto pMoveTo = MoveTo::create(0.01f, fortTopPos);
+				//pBombNode->runAction(pMoveTo);
+				//pBombNode->setPosition(fortTopPos);
+
 				pBombNode->setBombSpeed(bombSpeed);
+				pBombNode->setVisible(true);
 				pBombNode->setBombStatus(BombNode::BombStatus::Status_Move);
 				// 已经发射的子弹加一
 				m_nAlreadyShootBombNum++;
@@ -634,9 +771,12 @@ void BB_GameScene::handleAddBackground()
 
 void BB_GameScene::addBackgroundCallBack(cocos2d::Node* pNode)
 {
-	float fSize = BLOCK_SIZE / GameDeploy::getInstance()->getScalingRatio();
+	// 获取游戏配置
+	auto pGameDeploy = GameDeploy::getInstance();
+	auto interfaceSize = pGameDeploy->getInterfaceSize();
+	float fSize = BLOCK_SIZE;
 	pNode->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
-	pNode->setPositionY(_contentSize.height * 0.9f - fSize * 0.5f);
+	pNode->setPositionY(interfaceSize.height * 0.846f - fSize * 0.5f);
 	int nNum = pNode->getTag();
 	switch (nNum)
 	{
@@ -657,30 +797,39 @@ void BB_GameScene::addBackgroundCallBack(cocos2d::Node* pNode)
 void BB_GameScene::handleRollScreen()
 {
 	auto pGameStatus = GameStatusManager::getInstance();
+	bool bGameOver = true;
 	if (pGameStatus->getGameStatus() != GameStatusManager::GameStatus::kStatus_RollScreen)
 	{
 		return;
 	}
 	// 所有内容下移
-	float fSize = BLOCK_SIZE / GameDeploy::getInstance()->getScalingRatio();
+	float fSize = BLOCK_SIZE;
 	auto vBlock = m_pBlockNode->getChildren();
 	for (int i = 0; i < vBlock.size(); i++)
 	{
 		auto pBlockNode = vBlock.at(i);
+		auto xx = pBlockNode->getAnchorPoint();
 		auto blockPos = pBlockNode->getPosition();
 		float fY = blockPos.y - fSize;
 		auto pMoveTo = MoveTo::create(1, Vec2(blockPos.x, fY));
 		auto delayTime = DelayTime::create(0.5f);
-		auto seq = Sequence::create(delayTime, pMoveTo, nullptr);
-		pBlockNode->runAction(seq);
-		if (fY <= _contentSize.height * SCREEN_BUTTOM_COFFICIENT)
+		if (fY - fSize*0.5f <= _contentSize.height * SCREEN_BUTTOM_COFFICIENT &&
+			pGameStatus->getGameStatus() != GameStatusManager::GameStatus::kStatus_Result)
 		{
-			// 游戏结束 
-			handleGameOver();
-			return;
+			// 改变游戏状态
+			pGameStatus->setGameStatus(GameStatusManager::GameStatus::kStatus_Result);
+			// 游戏结束 添加一个动作结束回调函数
+			CallFunc* pCallFunc = CallFunc::create(CC_CALLBACK_0(BB_GameScene::handleGameOver, this));
+			FiniteTimeAction*  pFiniteTimeAction = Sequence::create(delayTime, pMoveTo, pCallFunc, NULL);
+			pBlockNode->runAction(pFiniteTimeAction);
+			bGameOver = false;
+		}
+		else
+		{
+			auto seq = Sequence::create(delayTime, pMoveTo, nullptr);
+			pBlockNode->runAction(seq);
 		}
 	}
-
 	// 下移动黑洞
 	auto vBlackHole = m_pBlackHoleNode->getChildren();
 	for (int i = 0; i < vBlackHole.size(); i++)
@@ -714,8 +863,17 @@ void BB_GameScene::handleRollScreen()
 			pFoodNode->removeFromParent();
 		}
 	}
-	// 改变游戏状态
-	GameStatusManager::getInstance()->setGameStatus(GameStatusManager::GameStatus::kStatus_AddBomb);
+	// 如果游戏结束着不改变游戏状态
+	if (bGameOver)
+	{
+		// 改变游戏状态
+		GameStatusManager::getInstance()->setGameStatus(GameStatusManager::GameStatus::kStatus_None);
+		// 1.5秒后才能到下一阶段
+		auto pDelayTime = DelayTime::create(1.5f);
+		auto pCallFuncN = CallFuncN::create(CC_CALLBACK_1(BB_GameScene::setGameStatusCallBack, this, GameStatusManager::GameStatus::kStatus_AddBomb));
+		auto pSeq = Sequence::create(pDelayTime, pCallFuncN, NULL);
+		this->runAction(pSeq);
+	}
 }
 
 void BB_GameScene::handleAddBomb()
@@ -731,15 +889,18 @@ void BB_GameScene::handleAddBomb()
 	auto vBomb = pBombDataManager->getBombVector();
 	// 获取屏幕缩放比
 	auto fScalingRatio = GameDeploy::getInstance()->getScalingRatio();
+	// 获取炮台位置
 	auto pos = FortDataManager::getInstance()->getForPosition();
+	auto fortNodeSize = m_pFortNode->getContentSize();
 	// 创建子弹
 	for (int i = vBomb.size(); i < m_nBombNum; i++)
 	{
 		auto pBombSprite = BombDataManager::getInstance()->addBombNode();
-		pBombSprite->setAnchorPoint(Vec2::ANCHOR_MIDDLE_BOTTOM);
-		pBombSprite->setPosition(pos.x, _contentSize.height * 0.1f + 20 / fScalingRatio);
+		pBombSprite->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
+		pBombSprite->setPosition(pos.x, pos.y + fortNodeSize.height * 0.5f);
 		pBombSprite->setBombSpeed(Vec2(0.0f, 0.0f));
 		m_pBombNode->addChild(pBombSprite);
+		pBombSprite->setVisible(false);
 	}
 
 	// 改为准备射击状态
@@ -760,29 +921,22 @@ void BB_GameScene::handleGameOver()
 {
 	clearPhysicsBody();
 	// 删除游戏界面
-	m_pGameLayer->removeFromParent();
 	// 改变游戏状态
 	GameStatusManager::getInstance()->setGameStatus(GameStatusManager::GameStatus::kStatus_Result);
 	// 获取游戏界面
 	float fScalingRatio = GameDeploy::getInstance()->getScalingRatio();
+	auto interfaceSize = GameDeploy::getInstance()->getInterfaceSize();
 	// 显示结束界面
 	m_pGameOverLayer = LayerColor::create();
-	m_pGameOverLayer->setColor(Color3B::BLACK);
-	m_pGameOverLayer->setOpacity(0.4 * 255);
+	m_pGameOverLayer->setColor(Color3B::GRAY);
+	m_pGameOverLayer->setOpacity(0.5 * 255);
 	m_pGameOverLayer->ignoreAnchorPointForPosition(false);
 	m_pGameOverLayer->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
 	m_pGameOverLayer->setPosition(_contentSize * 0.5f);
 	addChild(m_pGameOverLayer, 2);
 
-	// 创建一个点击任意地方返回首页
-	auto pHomeMenu = Menu::create();
-	auto pHomeButton = MenuItemImage::create();
-	pHomeButton->setContentSize(_contentSize);
-	pHomeButton->setCallback(CC_CALLBACK_1(BB_GameScene::menuHomeCallBack, this));
-	pHomeMenu->addChild(pHomeButton);
-	m_pGameOverLayer->addChild(pHomeMenu);
-	auto pUserData = UserDataManager::getInstance();
 	// 检测是否打破记录
+	auto pUserData = UserDataManager::getInstance();
 	int nHistoryHighScore = pUserData->getHighScore();
 	if (nHistoryHighScore < m_nScore)
 	{
@@ -790,58 +944,59 @@ void BB_GameScene::handleGameOver()
 		nHistoryHighScore = m_nScore;
 	}
 
-	// 添加一个大的Block
-	auto pS9ScoreBoard = ui::Scale9Sprite::create("res/BB_Bomb/Image/bb_end_block.png");
-#if defined(SVB_VERTICAL_SCREEN)
-	pS9ScoreBoard->setPreferredSize(Size(_contentSize.width * 0.8f, _contentSize.width * 0.6f));
-	pS9ScoreBoard->setPosition(_contentSize.width * 0.5f, _contentSize.height * 0.6f);
-#else
-	pS9ScoreBoard->setPreferredSize(Size(_contentSize.height * 0.8f, _contentSize.height * 0.6f));
-	pS9ScoreBoard->setPosition(_contentSize.width * 0.5f, _contentSize.height * 0.57f);
-#endif
-	pS9ScoreBoard->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
-	m_pGameOverLayer->addChild(pS9ScoreBoard);
-	// 获取Board的尺寸
-	auto boardSize = pS9ScoreBoard->getContentSize();
+	// 结算界面背景
+	auto pSettlementSprite = Sprite::create("res/BB_Bomb/Image/bb_settlement.png");
+	auto settlementSize = pSettlementSprite->getContentSize();
+
+	pSettlementSprite->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
+	pSettlementSprite->setScale(_contentSize.width * 0.8 / settlementSize.width);
+	pSettlementSprite->setPosition(_contentSize * 0.5f);
+	m_pGameOverLayer->addChild(pSettlementSprite);
+
 	// 显示玩家得分
-	auto pScoreLabel = Label::createWithSystemFont(StringUtils::format("%d", m_nScore), FNT_NAME, 250 / fScalingRatio);
-	pScoreLabel->setAnchorPoint(Vec2::ANCHOR_MIDDLE_BOTTOM);
-	pScoreLabel->setTextColor(Color4B::BLACK);
-	pScoreLabel->setPosition(boardSize.width * 0.5f, boardSize.height * 0.48f);
-	pS9ScoreBoard->addChild(pScoreLabel);
-	// 添加历史最高分前面的皇冠
-	auto pCrownSprite = Sprite::create("res/BB_Bomb/Image/bb_crown.png");
-	pCrownSprite->setAnchorPoint(Vec2::ANCHOR_BOTTOM_LEFT);
-	pCrownSprite->setColor(Color3B(255, 253, 16));
+	auto pScoreLabel = Label::createWithBMFont(GOLDEN_SCORE_BMFNT, StringUtils::format("%d", m_nScore));
+	float fScoreLabelScale = 1.5f;
+	pScoreLabel->setScale(fScoreLabelScale);
+	pScoreLabel->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
+	auto scoreLabelRect = pScoreLabel->getBoundingBox();
+	// 对分数进行缩放
+	while (scoreLabelRect.size.width + scoreLabelRect.size.height > interfaceSize.width * 0.663f)
+	{
+		fScoreLabelScale -= 0.01f;
+		pScoreLabel->setScale(fScoreLabelScale);
+		scoreLabelRect = pScoreLabel->getBoundingBox();
+	}
+	pScoreLabel->setPosition(settlementSize.width * 0.5f, settlementSize.height * 0.52f);
+	pSettlementSprite->addChild(pScoreLabel);
+
 	// 显示历史最高分
-	auto pHistorHighScoreLabel = Label::createWithSystemFont(StringUtils::format("%d", nHistoryHighScore), FNT_NAME, 100 / fScalingRatio);
-	pHistorHighScoreLabel->setAnchorPoint(Vec2::ANCHOR_MIDDLE_RIGHT);
-	pHistorHighScoreLabel->setTextColor(Color4B(255, 253, 16, 255));
-	// 获取皇冠的boundingBox
-	auto crownRect = pCrownSprite->getBoundingBox();
-	// 获取scoreLabel的boundingBox
-	auto scoreLabelRect = pHistorHighScoreLabel->getBoundingBox();
-
-	// 添加输出分数弹框
-	auto pS9ScoreBomb = ui::Scale9Sprite::create("res/BB_Bomb/Image/bb_end_block.png");
-	auto fMarginX = 100 / fScalingRatio;
-	auto fMarginY = 30 / fScalingRatio;
-	auto fMarginCenter = 40 / fScalingRatio;
-	pS9ScoreBomb->setPreferredSize(Size(crownRect.size.width + scoreLabelRect.size.width +
-		fMarginCenter + 2 * fMarginX,
-		crownRect.size.height + 2 * fMarginY));
-	pS9ScoreBomb->setPosition(boardSize.width * 0.5f, boardSize.height * 0.09f);
-	pS9ScoreBomb->setAnchorPoint(Vec2::ANCHOR_MIDDLE_BOTTOM);
-	pS9ScoreBomb->setColor(Color3B::BLACK);
-	pS9ScoreBoard->addChild(pS9ScoreBomb);
-
-	// 设置历史最高分Label的位置
-	pHistorHighScoreLabel->setPosition(pS9ScoreBomb->getBoundingBox().size.width - fMarginX,
-		crownRect.size.height * 0.5f + fMarginY);
-	pS9ScoreBomb->addChild(pHistorHighScoreLabel);
-	// 设置皇冠的位置
-	pCrownSprite->setPosition(10 / fScalingRatio + fMarginX, fMarginY);
-	pS9ScoreBomb->addChild(pCrownSprite);
+	auto pHistorHighScoreLabel = Label::createWithSystemFont(bailinText(StringUtils::format("最高分  %d", nHistoryHighScore)), FNT_NAME, 35 / fScalingRatio);
+	pHistorHighScoreLabel->setTextColor(Color4B::WHITE);
+	auto HighScoreLabelRect = pHistorHighScoreLabel->getBoundingBox();
+	float highScoreLabelScale = 1.0f;
+	// 对历史最高分进行缩放
+	while (HighScoreLabelRect.size.width + HighScoreLabelRect.size.height > interfaceSize.width * 0.553f)
+	{
+		highScoreLabelScale -= 0.01f;
+		pHistorHighScoreLabel->setScale(fScoreLabelScale);
+		HighScoreLabelRect = pHistorHighScoreLabel->getBoundingBox();
+	}
+	pHistorHighScoreLabel->setPosition(settlementSize.width * 0.5f, settlementSize.height * 0.389f);
+	pSettlementSprite->addChild(pHistorHighScoreLabel);
+
+	// 创建返回首页的按钮
+	auto pHomeButtom = MenuItemImage::create("res/BB_Bomb/Image/bb_home_bottom.png", "res/BB_Bomb/Image/bb_home_bottom.png", CC_CALLBACK_1(BB_GameScene::menuHomeCallBack, this));
+	auto pFristSprite = pHomeButtom->getNormalImage();
+	auto fristSize = pFristSprite->getContentSize();
+	auto pLastSprite = pHomeButtom->getSelectedImage();
+	pLastSprite->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
+	pLastSprite->setScale(1.08f);
+	pLastSprite->setPosition(fristSize * 0.5f);
+
+	auto pHomeMenu = Menu::create(pHomeButtom, nullptr);
+	pHomeMenu->setContentSize(Size(0, 0));
+	pHomeMenu->setPosition(settlementSize.width * 0.5f, settlementSize.height * 0.165f);
+	pSettlementSprite->addChild(pHomeMenu);
 
 	// 关闭update
 	// unscheduleUpdate();
@@ -849,6 +1004,8 @@ void BB_GameScene::handleGameOver()
 
 void BB_GameScene::menuHomeCallBack(cocos2d::Ref* spender)
 {
+	// 删除游戏界面
+	m_pGameLayer->removeFromParent();
 	// 删除结束界面的Layer 
 	m_pGameOverLayer->removeFromParent();
 	// 
@@ -917,6 +1074,7 @@ void BB_GameScene::menuRecyclingBombCallBack(cocos2d::Ref* spender)
 	auto pos = pFortDataManager->getForPosition();
 	// 获取屏幕缩放比
 	auto fScalingRatio = GameDeploy::getInstance()->getScalingRatio();
+	auto fortSize = m_pFortNode->getContentSize();
 	for (auto i = 0; i < vFlyBomb.size(); i++)
 	{
 		auto pBombSprite = vFlyBomb[i];
@@ -926,8 +1084,12 @@ void BB_GameScene::menuRecyclingBombCallBack(cocos2d::Ref* spender)
 #else
 		pBombSprite->getPhysicsBody()->setEnabled(false);
 #endif
-		auto pMoveTo = MoveTo::create(0.5f, Vec2(pos.x, _contentSize.height * SCREEN_BUTTOM_COFFICIENT + 20 / fScalingRatio));
-		pBombSprite->runAction(pMoveTo);
+		auto pMoveTo = MoveTo::create(0.5f, Vec2(pos.x, pos.y + fortSize.height * 0.5f));
+		// 创建一个动画结束回调函数
+		auto pFun = CallFuncN::create(CC_CALLBACK_1(BB_GameScene::hideBombCallBack, this, pBombSprite));
+		auto delayTime = DelayTime::create(0.1f);
+		auto seq = Sequence::create(delayTime, pMoveTo, pFun, nullptr);
+		pBombSprite->runAction(seq);
 	}
 	m_nMoveBombNum = 0;
 	// 清空飞行Bomb数组数据
@@ -942,6 +1104,8 @@ void BB_GameScene::menuRecyclingBombCallBack(cocos2d::Ref* spender)
 
 void BB_GameScene::createRecyclingBombButton()
 {
+	// 获取界面有效尺寸
+	auto interfaceSize = GameDeploy::getInstance()->getInterfaceSize();
 	// 创建回收Bomb的按钮
 	m_pRecyclingButton = MenuItemImage::create("res/BB_Bomb/Image/bb_recycling_button.png", "res/BB_Bomb/Image/bb_recycling_button.png",
 		CC_CALLBACK_1(BB_GameScene::menuRecyclingBombCallBack, this));
@@ -950,14 +1114,13 @@ void BB_GameScene::createRecyclingBombButton()
 	auto size = pNode1->getContentSize();
 	auto pNode2 = m_pRecyclingButton->getSelectedImage();
 	pNode2->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
-	pNode2->setScale(1.5f);
+	pNode2->setScale(1.1f);
 	pNode2->setPosition(size*0.5f);
 	auto menuRecycling = Menu::create(m_pRecyclingButton, NULL);
 	menuRecycling->setContentSize(Size(0, 0));
-	menuRecycling->setPosition(0, 0);
 	// 设置按钮位置
-	m_pRecyclingButton->setPosition(_contentSize.width - size.width*1.2f*0.5f, size.height *1.2f*0.5f);
-	m_pGameLayer->addChild(menuRecycling, 3);
+	menuRecycling->setPosition(interfaceSize.width - size.width * 1.1f * 0.5f, interfaceSize.height * 0.95f);
+	m_pGameLayer->addChild(menuRecycling, 2);
 	// 关闭按钮
 	setRecyclingBombEnable(false);
 }
@@ -994,11 +1157,12 @@ void BB_GameScene::handleBlackHoleBlack()
 		// 删除黑洞Blockk
 		pBlackHoleNode->removeFromParent();
 		// 添加粒子爆炸效果
-		// auto pParticleRatio = ParticleSystemQuad::create("res/BB_Bomb/particle/bb_black_hole_explode.plist");
 		auto pParticleRatio = ParticleSystemQuad::create("res/BB_Bomb/particle/bb_block_explode.plist");
 		auto nNum = random(0, 60);
 		pParticleRatio->setStartColorVar(Color4F(getBlockColorWithNumer(nNum)));
 		pParticleRatio->setPosition(pos);
+		// pos = m_pGameLayer->convertToWorldSpace(pos);
+		// pos = m_pGameLayer->convertToWorldSpace(pos);
 		pParticleRatio->setCascadeColorEnabled(true);
 		pParticleRatio->setScale(1 / fScalingRatio);
 		pParticleRatio->setLife(4);
@@ -1006,14 +1170,55 @@ void BB_GameScene::handleBlackHoleBlack()
 		m_pGameLayer->addChild(pParticleRatio);
 
 		auto pBombActuon = ActionFactoryNode::create(-1);
-		pBombActuon->setPosition(pos);
+		pBombActuon->setPosition(pos.x - BLOCK_SIZE*0.5f, pos.y);
 		m_pGameLayer->addChild(pBombActuon, 2);
 
 		// 删除子弹
 		pBombManager->removeBomb();
 		// 子弹数量减一
 		// 刷新子弹个数
-		m_nBombNum = FortDataManager::getInstance()->getBombSize();
-		m_pBombNumLabel->setString(bailinText(StringUtils::format("子弹 : %d", m_nBombNum)));
+		m_pBombNumLabel->setString(bailinText(StringUtils::format("子弹 : %d", --m_nBombNum)));
+	}
+}
+
+void BB_GameScene::hideBombCallBack(Ref* speder, BombNode* pBombNode)
+{
+	if (pBombNode == nullptr)
+	{
+		return;
 	}
+	pBombNode->setVisible(false);
+}
+
+
+
+void BB_GameScene::setGameStatusCallBack(cocos2d::Ref* spender, const GameStatusManager::GameStatus& eStatus)
+{
+	auto pGameStatua = GameStatusManager::getInstance();
+	if (pGameStatua == nullptr) return;
+
+	pGameStatua->setGameStatus(eStatus);
+}
+
+void BB_GameScene::handleScaleScoreLabel()
+{
+	if (m_pScoreLabel == nullptr) return;
+
+	// 获取屏幕有效尺寸
+	auto interfaceSize = GameDeploy::getInstance()->getInterfaceSize();
+	// 处理字体超出边宽范围缩小
+	auto scoreRect = m_pScoreLabel->getBoundingBox();
+	// 0.45 是按照显示框的根据屏幕的尺寸计算出来的
+	while (scoreRect.size.width + scoreRect.size.height > interfaceSize.width * 0.45f)
+	{
+		m_fScoreLabelScale -= 0.01f;
+		m_pScoreLabel->setScale(m_fScoreLabelScale);
+		scoreRect = m_pScoreLabel->getBoundingBox();
+	}
+}
+
+void BB_GameScene::onSaveGameScheduleCallBack(cocos2d::Ref* spender)
+{
+	// 回调 保存游戏
+	CCLOG("on onSaveGameScheduleCallBack");
 }
diff --git a/BB_Bomb/Classes/BB_Bomb/Scene/BB_GameScene.h b/BB_Bomb/Classes/BB_Bomb/Scene/BB_GameScene.h
index f254a29..d423588 100644
--- a/BB_Bomb/Classes/BB_Bomb/Scene/BB_GameScene.h
+++ b/BB_Bomb/Classes/BB_Bomb/Scene/BB_GameScene.h
@@ -2,6 +2,9 @@
 #define __BB_GAME_SCENE_H__
 #include "cocos2d.h"
 #include "../UI/FortNode.h"
+#include "../UI/BombNode.h"
+#include "../../bailinUtils/DialogLayer.h"
+#include "../Manager/GameStatusManager.h"
 
 // 游戏开始事件名  
 #define START_GAME_EVENT  "StartGameEvent" 
@@ -56,6 +59,18 @@ private:
 	* @brief 回收飞行中的子弹
 	*/
 	void menuRecyclingBombCallBack(cocos2d::Ref* spender);
+	/*
+	* @brief 动画结束回调隐藏子弹,
+	*/
+	void hideBombCallBack(cocos2d::Ref* spender, BombNode* pBombNode);
+	/*
+	* @brief 回调改变游戏状态
+	*/
+	void setGameStatusCallBack(cocos2d::Ref* spender, const GameStatusManager::GameStatus& eStatus);
+	/*
+	* @brief 回调保存游戏
+	*/
+	void onSaveGameScheduleCallBack(cocos2d::Ref* spender);
 private:
 	/*
 	* @brief 游戏开始事件调用 初始话游戏数据
@@ -82,6 +97,10 @@ private:
 	*/
 	bool onContactBegin(cocos2d::PhysicsContact& contac);
 	/*
+	* @brief 对玩家分数Label进行缩放
+	*/
+	void handleScaleScoreLabel();
+	/*
 	* @brief 创建背景回调函数
 	*/
 	void addBackgroundCallBack(cocos2d::Node* pNode);
@@ -102,6 +121,10 @@ private:
 	*/
 	void handleShootBomb();
 	/*
+	* @brief 获取炮口在主界面的位置, 在handleShootBomb()中调用
+	*/
+	const cocos2d::Vec2& getFortTopPos();
+	/*
 	* @brief 处理Block的生成
 	*/
 	void handleAddBackground();
@@ -151,7 +174,7 @@ private:
 	// 回收子弹的按钮
 	cocos2d::MenuItemImage* m_pRecyclingButton = nullptr;
 	// 游戏结算Layer
-	cocos2d::Layer* m_pGameOverLayer = nullptr;
+	bailin::ui::DialogLayer::Layer* m_pGameOverLayer = nullptr;
 	// 触摸监听器
 	cocos2d::EventListenerTouchOneByOne* m_pEventListenerTouch = nullptr;
 private:
@@ -171,6 +194,8 @@ private:
 	bool m_bMoveFort;
 	// 子弹的数量
 	int m_nBombNum;
+	// 得分Label的缩放比例
+	float m_fScoreLabelScale;
 };
 
 
diff --git a/BB_Bomb/Classes/BB_Bomb/StructData/BlockData.h b/BB_Bomb/Classes/BB_Bomb/StructData/BlockData.h
index 8198538..f230832 100644
--- a/BB_Bomb/Classes/BB_Bomb/StructData/BlockData.h
+++ b/BB_Bomb/Classes/BB_Bomb/StructData/BlockData.h
@@ -7,14 +7,16 @@ public:
 	// 块块属性
 	enum class Type
 	{
-		// 正常
-		Type_Nome,
+        // 无形状
+        Type_None,
+        // 正方形
+        Type_Cube,
 		// 八边形
 		Type_Octagon,
 		// 三角形 
 		Type_Triangle,
 		// 黑洞
-		Type_BlackHole
+		Type_BlackHole,
 	};
 	// 块块生命值
 	int m_nHP;
diff --git a/BB_Bomb/Classes/BB_Bomb/UI/ActionFactoryNode.cpp b/BB_Bomb/Classes/BB_Bomb/UI/ActionFactoryNode.cpp
index a5d4eed..1f3a13e 100644
--- a/BB_Bomb/Classes/BB_Bomb/UI/ActionFactoryNode.cpp
+++ b/BB_Bomb/Classes/BB_Bomb/UI/ActionFactoryNode.cpp
@@ -26,7 +26,7 @@ bool ActionFactoryNode::initWith(int nNum)
 		auto pGameDeploy = GameDeploy::getInstance();
 		auto fScalingRatio = pGameDeploy->getScalingRatio();
 		// 创建食物
-		auto pFoodSprite = Sprite::create("res/BB_Bomb/Image/bb_addFood.png");
+		auto pFoodSprite = Sprite::create("res/BB_Bomb/Image/balls/default.png");
 		auto size = pFoodSprite->getContentSize();
 		pFoodSprite->setPosition(size * 0.5f);
 
@@ -38,11 +38,11 @@ bool ActionFactoryNode::initWith(int nNum)
 		// 添加得分的Label 
 		if (nNum > 0)
 		{
-			pSocerLabel = Label::createWithSystemFont(StringUtils::format(" +%d", nNum), FNT_NAME, 30 / fScalingRatio);
+			pSocerLabel = Label::createWithBMFont(BLOCK_NUM_BMFNT, StringUtils::format(" +%d", nNum));
 		}
 		else
 		{
-			pSocerLabel = Label::createWithSystemFont(StringUtils::format(" %d", nNum), FNT_NAME, 30 / fScalingRatio);
+			pSocerLabel = Label::createWithBMFont(BLOCK_NUM_BMFNT, StringUtils::format(" %d", nNum));
 		}
 		auto labelSize = pSocerLabel->getContentSize();
 		pSocerLabel->setPosition(_contentSize.width + labelSize.width*0.5f + 0 / fScalingRatio, _contentSize.height * 0.5f);
diff --git a/BB_Bomb/Classes/BB_Bomb/UI/BlockNode.cpp b/BB_Bomb/Classes/BB_Bomb/UI/BlockNode.cpp
index bfbbfc9..6defb6e 100644
--- a/BB_Bomb/Classes/BB_Bomb/UI/BlockNode.cpp
+++ b/BB_Bomb/Classes/BB_Bomb/UI/BlockNode.cpp
@@ -1,7 +1,10 @@
 ﻿#include "BlockNode.h"
 #include "../Manager/GameDeploy.h"
+#include "PhysicsShapeCache.h"
+
 USING_NS_CC;
 
+
 BlockNode* BlockNode::create(const BlockData& blockData)
 {
 	BlockNode* pRet = new BlockNode;
@@ -22,51 +25,44 @@ bool BlockNode::initWithData(const BlockData& blockData)
 	do
 	{
 		CC_BREAK_IF(!Node::init());
+
 		m_BlockData.m_nHP = blockData.m_nHP;
 		m_BlockData.m_eType = blockData.m_eType;
 		// 添加HP Label
 		// 字体大小先不设置
-		m_pHPLabel = Label::createWithBMFont(NUM_FILE, StringUtils::format("%d", m_BlockData.m_nHP));
+		m_pHPLabel = Label::createWithBMFont(BLOCK_NUM_BMFNT, StringUtils::format("%d", m_BlockData.m_nHP));
 		// 获取屏幕缩放比
 		float fScalingRatio = GameDeploy::getInstance()->getScalingRatio();
 		// 设置Node 
-		setContentSize(Size(BLOCK_SIZE / fScalingRatio, BLOCK_SIZE / fScalingRatio));
+		setContentSize(Size(BLOCK_SIZE, BLOCK_SIZE));
 		setAnchorPoint(Vec2::ANCHOR_MIDDLE);
-		Size blockSize;
+
+		m_pHPLabel->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
+		m_pHPLabel->setPosition(_contentSize*0.5f);
+
 		switch (m_BlockData.m_eType)
 		{
-		case BlockData::Type::Type_Nome:
+		case BlockData::Type::Type_Cube:
 		{
-			m_pBlockSprite = Sprite::create("res/BB_Bomb/Image/BB_block_nome.png");
-			blockSize = m_pBlockSprite->getContentSize();
-			// 创建刚体
-			m_pBlockBody = PhysicsBody::createBox(blockSize, PhysicsMaterial(0.0f, 1.0f, 0.0f));
-			// 设置字体位置
-			m_pHPLabel->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
-			m_pHPLabel->setPosition(_contentSize.width * 0.45f, _contentSize.height * 0.4f);
-			m_pHPLabel->setColor(Color3B::BLACK);
-			m_pBlockSprite->addChild(m_pHPLabel);
+			m_pBlockSprite = Sprite::create("res/BB_Bomb/Image/blocks/3_3.png");
+			m_pBlockBody = PhysicsShapeCache::getInstance()->createBodyWithName("cube");
 			setBlockTag(BLOCK_TAG_NUM);
 			break;
 		}
 		case BlockData::Type::Type_Triangle:
 		{
-			m_pBlockSprite = Sprite::create("res/BB_Bomb/Image/BB_block_half.png");
-			blockSize = m_pBlockSprite->getContentSize();
-			int nNum = random(1, 4);
-			handleTriangle(nNum);
-#if COCOS2D_VERSION <= 0x00030330
-			// 3.3刚体会随着精灵旋转
-			nNum = 1;
-#endif
-			initTriangle(nNum, blockSize);
+			m_pBlockSprite = Sprite::create("res/BB_Bomb/Image/blocks/1_1.png");
+			m_pBlockBody = PhysicsShapeCache::getInstance()->createBodyWithName("triangle");
+			m_pHPLabel->setPosition(_contentSize.width*0.5f, _contentSize.height*0.4f);
 			setBlockTag(BLOCK_TAG_NUM);
 			break;
 		}
 		case BlockData::Type::Type_Octagon:
 		{
-
-			initOctagon();
+			m_pBlockSprite = Sprite::create("res/BB_Bomb/Image/blocks/2_2.png");
+			m_pBlockBody = PhysicsShapeCache::getInstance()->createBodyWithName("otagon");
+			m_pHPLabel->setPosition(_contentSize*0.5f);
+			setBlockTag(BLOCK_TAG_NUM);
 			break;
 		}
 		case BlockData::Type::Type_BlackHole:
@@ -77,11 +73,11 @@ bool BlockNode::initWithData(const BlockData& blockData)
 		}
 
 		// 设置遮掩码
-	// 设置类别表示遮掩码  0010
+		// 设置类别表示遮掩码  0010
 		m_pBlockBody->setCategoryBitmask(2);
-		// 设置接触测试遮掩码
+		// 设置接触测试遮掩码  0100
 		m_pBlockBody->setContactTestBitmask(4);
-		// 设置碰撞遮掩码
+		// 设置碰撞遮掩码     0100
 		m_pBlockBody->setCollisionBitmask(4);
 		// 设置成静态的
 		m_pBlockBody->setDynamic(false);
@@ -90,6 +86,23 @@ bool BlockNode::initWithData(const BlockData& blockData)
 		// 添加BlockSprite
 		m_pBlockSprite->setPosition(_contentSize * 0.5f);
 		addChild(m_pBlockSprite);
+
+		// 根据当前大小缩放
+		// m_pBlockSprite->setScale(_contentSize.width / m_pBlockSprite->getContentSize().width);
+		// m_pHPLabel->setScale(m_pBlockSprite->getScale());
+		addChild(m_pHPLabel);
+
+		// 给三角形随机换个方向
+		if (blockData.m_eType == BlockData::Type::Type_Triangle)
+		{
+			int r = cocos2d::random(1, 10);
+			if (r > 3)
+			{
+				m_pBlockSprite->setRotation(180);
+				m_pHPLabel->setPositionY(_contentSize.height*0.6f);
+			}
+		}
+
 		bRet = true;
 	} while (0);
 	return bRet;
@@ -109,98 +122,6 @@ int BlockNode::getBLockHp()
 	return m_BlockData.m_nHP;
 }
 
-void BlockNode::initTriangle(int nNum, cocos2d::Size blockSize)
-{
-	Point point[3];
-	switch (nNum)
-	{
-	case 1:
-		point[0] = Point(-blockSize.width * 0.5f, -blockSize.height *  0.5f);
-		point[1] = Point(-blockSize.width * 0.5f, blockSize.height * 0.5f);
-		point[2] = Point(blockSize.width * 0.5f, -blockSize.height * 0.5f);
-		break;
-	case 4:
-		point[0] = Point(-blockSize.width * 0.5f, -blockSize.height *  0.5f);
-		point[1] = Point(-blockSize.width * 0.5f, blockSize.height * 0.5f);
-		point[2] = Point(blockSize.width * 0.5f, blockSize.height * 0.5f);
-		break;
-	case 3:
-		point[0] = Point(-blockSize.width * 0.5f, blockSize.height *  0.5f);
-		point[1] = Point(blockSize.width * 0.5f, blockSize.height * 0.5f);
-		point[2] = Point(blockSize.width * 0.5f, -blockSize.height * 0.5f);
-		break;
-	case 2:
-		point[0] = Point(-blockSize.width * 0.5f, -blockSize.height *  0.5f);
-		point[1] = Point(blockSize.width * 0.5f, blockSize.height * 0.5f);
-		point[2] = Point(blockSize.width * 0.5f, -blockSize.height * 0.5f);
-		break;
-	default:
-		break;
-	}
-	// 创建刚体
-	m_pBlockBody = PhysicsBody::createPolygon(point, 3, PhysicsMaterial(0.0f, 1.0f, 0.0f));
-}
-
-void BlockNode::handleTriangle(int nNum)
-{
-	// 设置锚点位置
-	m_pHPLabel->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
-	switch (nNum)
-	{
-	case 1:
-		m_pHPLabel->setPosition(_contentSize.width * 0.35f, _contentSize.height * 0.2f);
-		m_pHPLabel->setColor(Color3B::BLACK);
-		m_pBlockSprite->addChild(m_pHPLabel);
-		break;
-	case 2:
-		m_pBlockSprite->setRotation(90);
-		m_pHPLabel->setPosition(_contentSize.width * 0.35f, _contentSize.height * 0.2f);
-		m_pHPLabel->setColor(Color3B::BLACK);
-		m_pBlockSprite->addChild(m_pHPLabel);
-		m_pHPLabel->setRotation(270);
-		break;
-	case 3:
-		m_pBlockSprite->setRotation(180);
-		m_pHPLabel->setPosition(_contentSize.width * 0.35f, _contentSize.height * 0.2f);
-		m_pHPLabel->setColor(Color3B::BLACK);
-		m_pBlockSprite->addChild(m_pHPLabel);
-		m_pHPLabel->setRotation(180);
-		break;
-	case 4:
-		m_pBlockSprite->setRotation(270);
-		m_pHPLabel->setPosition(_contentSize.width * 0.35f, _contentSize.height * 0.2f);
-		m_pHPLabel->setColor(Color3B::BLACK);
-		m_pBlockSprite->addChild(m_pHPLabel);
-		m_pHPLabel->setRotation(90);
-		break;
-	default:
-		break;
-	}
-
-}
-
-void BlockNode::initOctagon()
-{
-	float fScale = 0.7f;
-	m_pBlockSprite = Sprite::create("res/BB_Bomb/Image/bb_octagon.png");
-	// m_pBlockSprite->setOpacity(0.3f * 255);
-	auto blockSize = m_pBlockSprite->getContentSize();
-	Point point[8] = { Point(-blockSize.width * fScale, -blockSize.height) * 0.5f, Point(-blockSize.width, -blockSize.height * fScale) * 0.5f,
-						Point(-blockSize.width, blockSize.height * fScale) * 0.5f, Point(-blockSize.width * fScale, blockSize.height) * 0.5f,
-						Point(blockSize.width * fScale, blockSize.height) * 0.5f, Point(blockSize.width, blockSize.height * fScale) * 0.5f,
-						Point(blockSize.width, -blockSize.height * fScale) * 0.5f, Point(blockSize.width * fScale, -blockSize.height) * 0.5f };
-	m_pBlockBody = PhysicsBody::createPolygon(point, 8, PhysicsMaterial(0.0f, 1.0f, 0.0f));
-	m_pBlockSprite->setPhysicsBody(m_pBlockBody);
-
-	// 设置字体位置
-	m_pHPLabel->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
-	m_pHPLabel->setPosition(_contentSize.width * 0.45f, _contentSize.height * 0.4f);
-	m_pHPLabel->setColor(Color3B::BLACK);
-	m_pBlockSprite->addChild(m_pHPLabel);
-
-	setBlockTag(BLOCK_TAG_NUM);
-}
-
 void BlockNode::initBlackHole()
 {
 	m_pBlockSprite = Sprite::create("res/BB_Bomb/Image/bb_black_hole.png");
@@ -214,7 +135,6 @@ void BlockNode::initBlackHole()
 	m_pHPLabel->setAnchorPoint(Vec2::ANCHOR_MIDDLE);
 	m_pHPLabel->setPosition(_contentSize.width * 0.45f, _contentSize.height * 0.4f);
 	m_pHPLabel->setColor(Color3B::BLACK);
-	m_pBlockSprite->addChild(m_pHPLabel);
 
 	setBlockTag(BLACK_HOLE_TAG_NUM);
 }
diff --git a/BB_Bomb/Classes/BB_Bomb/UI/BlockNode.h b/BB_Bomb/Classes/BB_Bomb/UI/BlockNode.h
index 4ec1076..67888ba 100644
--- a/BB_Bomb/Classes/BB_Bomb/UI/BlockNode.h
+++ b/BB_Bomb/Classes/BB_Bomb/UI/BlockNode.h
@@ -1,9 +1,8 @@
 ﻿#ifndef __BLOCK_NODE_H__
-#define __BlOCK_NODE_H__
+#define __BLOCK_NODE_H__
 #include "cocos2d.h"
 #include "../StructData/BlockData.h"
 
-#define NUM_FILE "res/BB_Bomb/bmFnt/BB_num.fnt"
 class BlockNode : public cocos2d::Node
 {
 public:
@@ -25,18 +24,6 @@ public:
 	BlockData::Type getBlockType();
 private:
 	/*
-	* @brief 创建3角形刚体
-	*/
-	void initTriangle(int nNum, cocos2d::Size blockSize);
-	/*
-	* @brief 处理三角形旋转和填加Hp位置
-	*/
-	void handleTriangle(int nNum);
-	/*
-	* @brief 创建八边体
-	*/
-	void initOctagon();
-	/*
 	* @brief 创建黑洞
 	*/
 	void initBlackHole();
diff --git a/BB_Bomb/Classes/BB_Bomb/UI/BombNode.cpp b/BB_Bomb/Classes/BB_Bomb/UI/BombNode.cpp
index 414908b..e9ce0f8 100644
--- a/BB_Bomb/Classes/BB_Bomb/UI/BombNode.cpp
+++ b/BB_Bomb/Classes/BB_Bomb/UI/BombNode.cpp
@@ -22,13 +22,15 @@ bool BombNode::init()
 	do
 	{
 		CC_BREAK_IF(!Node::init());
-		m_pBombSprite = Sprite::create("res/BB_Bomb/Image/bb_Bomb.png");
+		// m_pBombSprite = Sprite::create("res/BB_Bomb/Image/bb_bomb.png");
+		m_pBombSprite = Sprite::create("res/BB_Bomb/Image/balls/default.png");
 		auto bombSize = m_pBombSprite->getContentSize();
 		setContentSize(bombSize);
 		m_pBombSprite->setPosition(_contentSize * 0.5f);
 		initBombPhysicsBody();
 		addChild(m_pBombSprite);
 		m_eBombStatus = BombStatus::Status_Sleep;
+		m_pBombSprite->setScale(0.80f);
 		bRet = true;
 	} while (0);
 	return bRet;
diff --git a/BB_Bomb/Classes/BB_Bomb/UI/BombNode.h b/BB_Bomb/Classes/BB_Bomb/UI/BombNode.h
index 98e4630..a297880 100644
--- a/BB_Bomb/Classes/BB_Bomb/UI/BombNode.h
+++ b/BB_Bomb/Classes/BB_Bomb/UI/BombNode.h
@@ -41,6 +41,10 @@ public:
 	* @brief 获取子弹的状态
 	*/
 	const BombNode::BombStatus& getBombStatus();
+	/*
+	* @brief 是否隐藏子弹
+	*/
+	void setEnableBomb(bool b);
 private:
 	cocos2d::Sprite* m_pBombSprite = nullptr;
 	// 子弹刚体
diff --git a/BB_Bomb/Classes/BB_Bomb/UI/FoodNode.cpp b/BB_Bomb/Classes/BB_Bomb/UI/FoodNode.cpp
index 20619ac..aa88eea 100644
--- a/BB_Bomb/Classes/BB_Bomb/UI/FoodNode.cpp
+++ b/BB_Bomb/Classes/BB_Bomb/UI/FoodNode.cpp
@@ -28,7 +28,7 @@ bool FoodNode::initWithData(const FoodData& foodData)
 		case FoodData::FoodType::kType_AddBomb:
 		{
 			// 创建食物
-			m_pFoodSprite = Sprite::create("res/BB_Bomb/Image/BB_addFood.png");
+			m_pFoodSprite = Sprite::create("res/BB_Bomb/Image/balls/default.png");
 			auto foodSize = m_pFoodSprite->getContentSize();
 			// 创建一个刚体
 			m_pFoodBody = PhysicsBody::createCircle(foodSize.width * 0.5f,
diff --git a/BB_Bomb/Classes/BB_Bomb/UI/FortNode.cpp b/BB_Bomb/Classes/BB_Bomb/UI/FortNode.cpp
index 97b756a..37fa2b4 100644
--- a/BB_Bomb/Classes/BB_Bomb/UI/FortNode.cpp
+++ b/BB_Bomb/Classes/BB_Bomb/UI/FortNode.cpp
@@ -21,11 +21,23 @@ bool FortNode::init()
 	do
 	{
 		CC_BREAK_IF(!Node::init());
-		m_pFortSprite = Sprite::create("res/BB_Bomb/Image/bb_fort.png");
+		m_pFortSprite = Sprite::create("res/BB_Bomb/Image/Forts/bb_fort_1.png");
+		m_pFortSprite->setScale(0.7f);
 		auto fortSize = m_pFortSprite->getContentSize();
-		setContentSize(fortSize);
-		m_pFortSprite->setPosition(_contentSize * 0.5f);
+		auto fortRect = m_pFortSprite->getBoundingBox();
+		setContentSize(fortRect.size);
+		setAnchorPoint(Vec2::ANCHOR_MIDDLE);
+
+		//auto nDar = DrawNode::create();
+		//nDar->drawRect(Vec2(0, 0), _contentSize, Color4F::RED);
+		//addChild(nDar);
+
+		m_pFortSprite->setPosition(_contentSize.width * 0.5f, _contentSize.height * 0.5f);
 		addChild(m_pFortSprite);
+		// 设置炮台透明度
+		// m_pFortSprite->setOpacity(0.5f * 255);
+		setFortAnchorPoint();
+		m_pFortSprite->setRotation(90);
 		bRet = true;
 	} while (0);
 	return bRet;
@@ -33,25 +45,28 @@ bool FortNode::init()
 
 void FortNode::addArrow(const cocos2d::Vec2& pos)
 {
-	if (m_pArrowSprite == nullptr)
+	if (m_pDottedLineSprite == nullptr)
 	{
 		// 装换坐标并记录传入的位置 
-		m_beginPos = m_pFortSprite->convertToNodeSpace(pos);
+		m_beginPos = this->convertToNodeSpace(pos);
 
-		m_pArrowSprite = Sprite::create("res/BB_Bomb/Image/bb_arrow.png");
-		m_pArrowSprite->setAnchorPoint(Vec2::ANCHOR_MIDDLE_RIGHT);
-		m_pArrowSprite->setPosition(_contentSize.width * 0.5f, 0);
-		addChild(m_pArrowSprite, -1);
 		// 创建虚线
-		auto arrowSize = m_pArrowSprite->getContentSize();
+		auto fortSize = m_pFortSprite->getContentSize();
 		m_pDottedLineSprite = Sprite::create("res/BB_Bomb/Image/bb_dotted_line.png");
+		m_pDottedLineSprite->setScale(1.5f);
 		m_pDottedLineSprite->setAnchorPoint(Vec2::ANCHOR_MIDDLE_RIGHT);
-		m_pDottedLineSprite->setPosition(arrowSize.width, arrowSize.height * 0.5f);
-		m_pArrowSprite->addChild(m_pDottedLineSprite, -1);
+		m_pDottedLineSprite->setPosition(fortSize.width, fortSize.height * 0.5f);
+		m_pFortSprite->addChild(m_pDottedLineSprite, -1);
 		// 添加提示位置的 Button
 		m_pButtonSprite = Sprite::create("res/BB_Bomb/Image/bb_button.png");
 		m_pButtonSprite->setPosition(m_beginPos);
 		addChild(m_pButtonSprite);
+		// 添加是否发射的提升圈
+		m_pPromptRingSprite = Sprite::create("res/BB_Bomb/Image/bb_prompt_ring.png");
+		m_pPromptRingSprite->setPosition(m_beginPos);
+		addChild(m_pPromptRingSprite);
+		// 隐藏提示圈
+		m_pPromptRingSprite->setOpacity(255 * 0);
 
 		// 计算向量的方向
 		Vec2 vector1(0, pos.y);
@@ -59,7 +74,6 @@ void FortNode::addArrow(const cocos2d::Vec2& pos)
 		// 转换为标准向量
 		m_startVector = ccpNormalize(m_startVector);
 		// 透明度为0
-		m_pArrowSprite->setOpacity(0);
 		m_pDottedLineSprite->setOpacity(0);
 		// 角度为零
 		m_fArrowRadian = 0;
@@ -68,37 +82,56 @@ void FortNode::addArrow(const cocos2d::Vec2& pos)
 
 void FortNode::removeArrow()
 {
-	m_pArrowSprite->removeFromParent();
 	m_pButtonSprite->removeFromParent();
+	m_pDottedLineSprite->removeFromParent();
+	m_pPromptRingSprite->removeFromParent();
 	m_pButtonSprite = nullptr;
 	m_pArrowSprite = nullptr;
+	m_pDottedLineSprite = nullptr;
 }
 
+
 void FortNode::setArrowRotation(const cocos2d::Vec2& Pos)
 {
 	// 转换坐标
-	auto endPos = m_pFortSprite->convertToNodeSpace(Pos);
+	auto endPos = this->convertToNodeSpace(Pos);
+	/*
+	* @brief 关闭子弹取消发射功能
+	*/
+	// 判断是否可以发射
+	//if (!judgeShoot(endPos))
+	//{
+	//	return;
+	//}
 	// 获取箭头提示缩放比
 	auto fArrowScalingRatio = GameDeploy::getInstance()->getArrowScalingRatio();
-	if (endPos.y < m_beginPos.y)
-	{
-		float fSize = m_beginPos.y - endPos.y > fArrowScalingRatio ? m_beginPos.y - endPos.y : fArrowScalingRatio;
-		fSize = fSize / fArrowScalingRatio;
-		m_pDottedLineSprite->setScaleX(fSize);
-	}
-	else
-	{
-		m_pDottedLineSprite->setScaleX(1);
-	}
+	// 关闭缩放功能
+	//if (endPos.y < m_beginPos.y)
+	//{
+	//	/*float fSize = m_beginPos.y - endPos.y > fArrowScalingRatio ? m_beginPos.y - endPos.y : fArrowScalingRatio;
+	//	fSize = fSize / fArrowScalingRatio;*/
+	//	// m_pDottedLineSprite->setScale(1.6f);
+	//}
+	//else
+	//{
+	//	m_pDottedLineSprite->setScaleX(1);
+	//}
+
 	// 计算传入的向量
-	Point vec2 = -ccpNormalize(ccpSub(endPos, m_beginPos));
+	// 根据角度发射
+	// Point vec2 = ccpNormalize(ccpSub(endPos, m_beginPos));
+	// 指那打哪
+	auto anchorPoint = m_pFortSprite->getAnchorPoint();
+	Point vec2 = ccpNormalize(ccpSub(endPos, Vec2(_contentSize.width * anchorPoint.x, _contentSize.height * anchorPoint.y)));
+	// 转换成指那打哪模式
+	Point vec1 = -ccpNormalize(Vec2(_contentSize.width * anchorPoint.x, 0));
 	// 获取弧度
-	m_fArrowRadian = ccpAngle(vec2, m_startVector);
+	m_fArrowRadian = ccpAngle(vec2, vec1);
 
 	// 弧度转换角度
 	float fRotation = CC_RADIANS_TO_DEGREES(m_fArrowRadian);
 	/*
-	* @brief 射击角度错误取消射击模式
+	* @brief 上移发射 : 射击角度错误取消射击模式
 	*/
 	//if (fRotation < 20.0f || fRotation > 160.0f)
 	//{
@@ -125,6 +158,7 @@ float FortNode::getArrowRadian()
 
 void FortNode::handleShootAngle(float fAngle)
 {
+	// fAngle -= 90;
 	// 获取箭头的极限角度
 	auto fArrowLimitAngle = GameDeploy::getInstance()->getArrowLimitAngle();
 	if (fAngle < fArrowLimitAngle)
@@ -136,12 +170,40 @@ void FortNode::handleShootAngle(float fAngle)
 		fAngle = 180 - fArrowLimitAngle;
 	}
 	m_fArrowRadian = CC_DEGREES_TO_RADIANS(fAngle);
-	m_pArrowSprite->setRotation(fAngle);
+	m_pFortSprite->setRotation(fAngle);
 
-	m_pArrowSprite->setOpacity(255);
 	// 获取block的HP
 	float fNum = GameDeploy::getInstance()->getBlockHP();
 	fNum = 50 > fNum ? fNum : 50;
 	fNum = (50 - fNum) / 50.0f;
-	m_pDottedLineSprite->setOpacity(fNum * 255);
+	m_pDottedLineSprite->setOpacity(1 * 255);
+}
+
+bool FortNode::judgeShoot(cocos2d::Vect pos)
+{
+	auto promptRingSize = m_pPromptRingSprite->getContentSize();
+
+	// 计算点到圆心的长度
+	float fSize = ccpLength(ccpSub(m_beginPos, pos));
+	if (fSize > promptRingSize.width*0.5f)
+	{
+		// 提示圈常亮
+		m_pPromptRingSprite->setOpacity(255 * 0.5f);
+		return true;
+	}
+	else
+	{
+		m_pPromptRingSprite->setOpacity(255 * 0.5f);
+		m_pDottedLineSprite->setOpacity(0);
+		// 角度设置为0度 无法发射
+		m_fArrowRadian = 0;
+		return false;
+	}
+}
+
+void FortNode::setFortAnchorPoint()
+{
+	auto fortRect = m_pFortSprite->getBoundingBox();
+	m_pFortSprite->setAnchorPoint(Vec2(1.0f - 0.35904628330995f,
+		fortRect.size.height * 0.5f / fortRect.size.height));
 }
diff --git a/BB_Bomb/Classes/BB_Bomb/UI/FortNode.h b/BB_Bomb/Classes/BB_Bomb/UI/FortNode.h
index bc511c4..67eadd8 100644
--- a/BB_Bomb/Classes/BB_Bomb/UI/FortNode.h
+++ b/BB_Bomb/Classes/BB_Bomb/UI/FortNode.h
@@ -33,11 +33,21 @@ private:
 	* @brief 锁死射击角度
 	*/
 	void handleShootAngle(float fAngle);
+	/*
+	* @brief 判断是否可以发射子弹
+	*/
+	bool judgeShoot(cocos2d::Vect pos);
+	/*
+	* @brief 设置炮台锚点
+	*/
+	void setFortAnchorPoint();
 private:
 	cocos2d::Sprite* m_pFortSprite = nullptr;
 	cocos2d::Sprite* m_pArrowSprite = nullptr;
 	cocos2d::Sprite* m_pDottedLineSprite = nullptr;
 	cocos2d::Sprite* m_pButtonSprite = nullptr;
+	// 是否可以发射提示圈
+	cocos2d::Sprite* m_pPromptRingSprite = nullptr;
 	// 记录创建箭头时鼠标的位置
 	cocos2d::Point m_beginPos;
 	// 计算角度时的对比向量
diff --git a/BB_Bomb/Classes/HelloWorldScene.cpp b/BB_Bomb/Classes/HelloWorldScene.cpp
deleted file mode 100644
index f8759f5..0000000
--- a/BB_Bomb/Classes/HelloWorldScene.cpp
+++ /dev/null
@@ -1,85 +0,0 @@
-#include "HelloWorldScene.h"
-#include "SimpleAudioEngine.h"
-
-USING_NS_CC;
-
-Scene* HelloWorld::createScene()
-{
-    return HelloWorld::create();
-}
-
-// on "init" you need to initialize your instance
-bool HelloWorld::init()
-{
-    //////////////////////////////
-    // 1. super init first
-    if ( !Scene::init() )
-    {
-        return false;
-    }
-    
-    auto visibleSize = Director::getInstance()->getVisibleSize();
-    Vec2 origin = Director::getInstance()->getVisibleOrigin();
-
-    /////////////////////////////
-    // 2. add a menu item with "X" image, which is clicked to quit the program
-    //    you may modify it.
-
-    // add a "close" icon to exit the progress. it's an autorelease object
-    auto closeItem = MenuItemImage::create(
-                                           "CloseNormal.png",
-                                           "CloseSelected.png",
-                                           CC_CALLBACK_1(HelloWorld::menuCloseCallback, this));
-    
-    closeItem->setPosition(Vec2(origin.x + visibleSize.width - closeItem->getContentSize().width/2 ,
-                                origin.y + closeItem->getContentSize().height/2));
-
-    // create menu, it's an autorelease object
-    auto menu = Menu::create(closeItem, NULL);
-    menu->setPosition(Vec2::ZERO);
-    this->addChild(menu, 1);
-
-    /////////////////////////////
-    // 3. add your codes below...
-
-    // add a label shows "Hello World"
-    // create and initialize a label
-    
-    auto label = Label::createWithTTF("Hello World", "fonts/Marker Felt.ttf", 24);
-    
-    // position the label on the center of the screen
-    label->setPosition(Vec2(origin.x + visibleSize.width/2,
-                            origin.y + visibleSize.height - label->getContentSize().height));
-
-    // add the label as a child to this layer
-    this->addChild(label, 1);
-
-    // add "HelloWorld" splash screen"
-    auto sprite = Sprite::create("HelloWorld.png");
-
-    // position the sprite on the center of the screen
-    sprite->setPosition(Vec2(visibleSize.width/2 + origin.x, visibleSize.height/2 + origin.y));
-
-    // add the sprite as a child to this layer
-    this->addChild(sprite, 0);
-    
-    return true;
-}
-
-
-void HelloWorld::menuCloseCallback(Ref* pSender)
-{
-    //Close the cocos2d-x game scene and quit the application
-    Director::getInstance()->end();
-
-    #if (CC_TARGET_PLATFORM == CC_PLATFORM_IOS)
-    exit(0);
-#endif
-    
-    /*To navigate back to native iOS screen(if present) without quitting the application  ,do not use Director::getInstance()->end() and exit(0) as given above,instead trigger a custom event created in RootViewController.mm as below*/
-    
-    //EventCustom customEndEvent("game_scene_close_event");
-    //_eventDispatcher->dispatchEvent(&customEndEvent);
-    
-    
-}
diff --git a/BB_Bomb/Classes/HelloWorldScene.h b/BB_Bomb/Classes/HelloWorldScene.h
deleted file mode 100644
index eed2c3a..0000000
--- a/BB_Bomb/Classes/HelloWorldScene.h
+++ /dev/null
@@ -1,20 +0,0 @@
-#ifndef __HELLOWORLD_SCENE_H__
-#define __HELLOWORLD_SCENE_H__
-
-#include "cocos2d.h"
-
-class HelloWorld : public cocos2d::Scene
-{
-public:
-    static cocos2d::Scene* createScene();
-
-    virtual bool init();
-    
-    // a selector callback
-    void menuCloseCallback(cocos2d::Ref* pSender);
-    
-    // implement the "static create()" method manually
-    CREATE_FUNC(HelloWorld);
-};
-
-#endif // __HELLOWORLD_SCENE_H__
diff --git a/BB_Bomb/Classes/PhysicsShapeCache.cpp b/BB_Bomb/Classes/PhysicsShapeCache.cpp
new file mode 100644
index 0000000..4dbe7e2
--- /dev/null
+++ b/BB_Bomb/Classes/PhysicsShapeCache.cpp
@@ -0,0 +1,289 @@
+//
+//  PhysicsShapeCache.cpp
+//
+//  Shape cache for Cocos2d-x (v3.x) with built-in physics classes.
+//
+//  Loads physics sprites created with https://www.codeandweb.com/physicseditor
+//
+//  Copyright (c) 2015 CodeAndWeb GmbH. All rights reserved.
+//  https://www.codeandweb.com
+//
+//  Permission is hereby granted, free of charge, to any person obtaining a copy
+//  of this software and associated documentation files (the "Software"), to deal
+//  in the Software without restriction, including without limitation the rights
+//  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
+//  copies of the Software, and to permit persons to whom the Software is
+//  furnished to do so, subject to the following conditions:
+//
+//  The above copyright notice and this permission notice shall be included in
+//  all copies or substantial portions of the Software.
+//
+//  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
+//  THE SOFTWARE.
+//
+
+#include "PhysicsShapeCache.h"
+
+USING_NS_CC;
+
+
+PhysicsShapeCache::PhysicsShapeCache()
+{
+}
+
+
+PhysicsShapeCache::~PhysicsShapeCache()
+{
+    removeAllShapes();
+}
+
+
+PhysicsShapeCache *PhysicsShapeCache::getInstance()
+{
+    static PhysicsShapeCache instance;
+    return &instance;
+}
+
+
+bool PhysicsShapeCache::addShapesWithFile(const std::string &plist)
+{
+    float scaleFactor = Director::getInstance()->getContentScaleFactor();
+    return addShapesWithFile(plist, scaleFactor);
+}
+
+
+bool PhysicsShapeCache::addShapesWithFile(const std::string &plist, float scaleFactor)
+{
+    CCASSERT(bodiesInFile.find(plist) == bodiesInFile.end(), "file already loaded");
+
+    ValueMap dict = FileUtils::getInstance()->getValueMapFromFile(plist);
+    if (dict.empty())
+    {
+        // plist file not found
+        return false;
+    }
+
+    ValueMap &metadata = dict["metadata"].asValueMap();
+    int format = metadata["format"].asInt();
+    if (format != 1)
+    {
+        CCASSERT(format == 1, "format not supported!");
+        return false;
+    }
+
+    ValueMap &bodydict = dict.at("bodies").asValueMap();
+
+    std::vector<BodyDef*> bodies(bodydict.size());
+    int num=0;
+
+    for (auto iter = bodydict.cbegin(); iter != bodydict.cend(); ++iter)
+    {
+        const ValueMap &bodyData = iter->second.asValueMap();
+        std::string bodyName = iter->first;
+        BodyDef *bodyDef = new BodyDef();
+        bodies[num++] = bodyDef;
+        bodyDefs.insert(std::make_pair(bodyName, bodyDef));
+        bodyDef->anchorPoint          = PointFromString(bodyData.at("anchorpoint").asString());
+        bodyDef->isDynamic            = bodyData.at("is_dynamic").asBool();
+        bodyDef->affectedByGravity    = bodyData.at("affected_by_gravity").asBool();
+        bodyDef->allowsRotation       = bodyData.at("allows_rotation").asBool();
+        bodyDef->linearDamping        = bodyData.at("linear_damping").asFloat();
+        bodyDef->angularDamping       = bodyData.at("angular_damping").asFloat();
+        bodyDef->velocityLimit        = bodyData.at("velocity_limit").asFloat();
+        bodyDef->angularVelocityLimit = bodyData.at("angular_velocity_limit").asFloat();
+
+        const ValueVector &fixtureList = bodyData.at("fixtures").asValueVector();
+        for (auto &fixtureitem : fixtureList)
+        {
+            FixtureData *fd = new FixtureData();
+            bodyDef->fixtures.push_back(fd);
+            auto &fixturedata = fixtureitem.asValueMap();
+            fd->density         = fixturedata.at("density").asFloat();
+            fd->restitution     = fixturedata.at("restitution").asFloat();
+            fd->friction        = fixturedata.at("friction").asFloat();
+            fd->tag             = fixturedata.at("tag").asInt();
+            fd->group           = fixturedata.at("group").asInt();
+            fd->categoryMask    = fixturedata.at("category_mask").asInt();
+            fd->collisionMask   = fixturedata.at("collision_mask").asInt();
+            fd->contactTestMask = fixturedata.at("contact_test_mask").asInt();
+
+            std::string fixtureType = fixturedata.at("fixture_type").asString();
+            if (fixtureType == "POLYGON")
+            {
+                fd->fixtureType = FIXTURE_POLYGON;
+                const ValueVector &polygonsArray = fixturedata.at("polygons").asValueVector();
+                for (auto &polygonitem : polygonsArray)
+                {
+                    Polygon *poly = new Polygon();
+                    fd->polygons.push_back(poly);
+                    auto &polygonArray = polygonitem.asValueVector();
+                    poly->numVertices = (int)polygonArray.size();
+                    auto *vertices = poly->vertices = new cocos2d::Point[poly->numVertices];
+                    int vindex = 0;
+                    for (auto &pointString : polygonArray)
+                    {
+                        auto offset = PointFromString(pointString.asString());
+                        vertices[vindex].x = offset.x / scaleFactor;
+                        vertices[vindex].y = offset.y / scaleFactor;
+                        vindex++;
+                    }
+                }
+            }
+            else if (fixtureType == "CIRCLE")
+            {
+                fd->fixtureType = FIXTURE_CIRCLE;
+                const ValueMap &circleData = fixturedata.at("circle").asValueMap();
+                fd->radius = circleData.at("radius").asFloat() / scaleFactor;
+                fd->center = PointFromString(circleData.at("position").asString()) / scaleFactor;
+            }
+            else
+            {
+                // unknown type
+                return false;
+            }
+
+        }
+    }
+
+    bodiesInFile[plist] = bodies;
+
+    return true;
+}
+
+
+PhysicsShapeCache::BodyDef *PhysicsShapeCache::getBodyDef(const std::string &name)
+{
+    try
+    {
+        return bodyDefs.at(name);
+    }
+    catch(std::out_of_range&)
+    {
+    }
+
+    try
+    {
+        return bodyDefs.at(name.substr(0, name.rfind('.'))); // remove file suffix and try again...
+    }
+    catch(std::out_of_range&)
+    {
+    }
+    
+    return nullptr;
+}
+
+
+void PhysicsShapeCache::setBodyProperties(PhysicsBody *body, BodyDef *bd)
+{
+    body->setGravityEnable(bd->affectedByGravity);
+    body->setDynamic(bd->isDynamic);
+    body->setRotationEnable(bd->allowsRotation);
+    body->setLinearDamping(bd->linearDamping);
+    body->setAngularDamping(bd->angularDamping);
+    body->setVelocityLimit(bd->velocityLimit);
+    body->setAngularVelocityLimit(bd->angularVelocityLimit);
+}
+
+
+void PhysicsShapeCache::setShapeProperties(PhysicsShape *shape, FixtureData *fd)
+{
+    shape->setGroup(fd->group);
+    shape->setCategoryBitmask(fd->categoryMask);
+    shape->setCollisionBitmask(fd->collisionMask);
+    shape->setContactTestBitmask(fd->contactTestMask);
+    shape->setTag(fd->tag);
+}
+
+
+PhysicsBody *PhysicsShapeCache::createBodyWithName(const std::string &name)
+{
+    BodyDef *bd = getBodyDef(name);
+    if (!bd)
+    {
+        CCLOG("WARNING: PhysicsBody with name \"%s\", not found!", name.c_str());
+        return nullptr; // body not found
+    }
+    PhysicsBody *body = PhysicsBody::create();
+    setBodyProperties(body, bd);
+
+    for (auto fd : bd->fixtures)
+    {
+        PhysicsMaterial material(fd->density, fd->restitution, fd->friction);
+        if (fd->fixtureType == FIXTURE_CIRCLE)
+        {
+            auto shape = PhysicsShapeCircle::create(fd->radius, material, fd->center);
+            setShapeProperties(shape, fd);
+            body->addShape(shape);
+        }
+        else if (fd->fixtureType == FIXTURE_POLYGON)
+        {
+            for (auto polygon : fd->polygons)
+            {
+                auto shape = PhysicsShapePolygon::create(polygon->vertices, polygon->numVertices, material, fd->center);
+                setShapeProperties(shape, fd);
+                body->addShape(shape);
+            }
+        }
+    }
+    return body;
+}
+
+
+bool PhysicsShapeCache::setBodyOnSprite(const std::string &name, Sprite *sprite)
+{
+    PhysicsBody *body = createBodyWithName(name);
+    if (body)
+    {
+        sprite->setPhysicsBody(body);
+        sprite->setAnchorPoint(getBodyDef(name)->anchorPoint);
+    }
+    return body != nullptr;
+}
+
+
+void PhysicsShapeCache::removeShapesWithFile(const std::string &plist)
+{
+    auto bodies = bodiesInFile.at(plist);
+
+    for (auto iter = bodies.begin(); iter != bodies.end(); ++iter)
+    {
+        safeDeleteBodyDef(*iter);
+    }
+
+    bodiesInFile.erase(plist);
+
+    return;
+}
+
+
+void PhysicsShapeCache::removeAllShapes()
+{
+    for (auto iter = bodyDefs.cbegin(); iter != bodyDefs.cend(); ++iter)
+    {
+        safeDeleteBodyDef(iter->second);
+    }
+    bodyDefs.clear();
+    bodiesInFile.clear();
+}
+
+
+void PhysicsShapeCache::safeDeleteBodyDef(BodyDef *bodyDef)
+{
+    for (auto fixturedata : bodyDef->fixtures)
+    {
+        for (auto polygon : fixturedata->polygons)
+        {
+            CC_SAFE_DELETE_ARRAY(polygon->vertices);
+            CC_SAFE_DELETE(polygon);
+        }
+        fixturedata->polygons.clear();
+        CC_SAFE_DELETE(fixturedata);
+    }
+    bodyDef->fixtures.clear();
+    CC_SAFE_DELETE(bodyDef);
+}
diff --git a/BB_Bomb/Classes/PhysicsShapeCache.h b/BB_Bomb/Classes/PhysicsShapeCache.h
new file mode 100644
index 0000000..645ef24
--- /dev/null
+++ b/BB_Bomb/Classes/PhysicsShapeCache.h
@@ -0,0 +1,168 @@
+//
+//  PhysicsShapeCache.h
+//
+//  Shape cache for Cocos2d-x (v3.x) with built-in physics classes.
+//
+//  Loads physics sprites created with https://www.codeandweb.com/physicseditor
+//
+//  Copyright (c) 2015 CodeAndWeb GmbH. All rights reserved.
+//  https://www.codeandweb.com
+//
+//  Permission is hereby granted, free of charge, to any person obtaining a copy
+//  of this software and associated documentation files (the "Software"), to deal
+//  in the Software without restriction, including without limitation the rights
+//  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
+//  copies of the Software, and to permit persons to whom the Software is
+//  furnished to do so, subject to the following conditions:
+//
+//  The above copyright notice and this permission notice shall be included in
+//  all copies or substantial portions of the Software.
+//
+//  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
+//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
+//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
+//  THE SOFTWARE.
+//
+
+#ifndef __PhysicsShapeCache_h__
+#define __PhysicsShapeCache_h__
+#include "cocos2d.h"
+
+class PhysicsShapeCache
+{
+public:
+
+    /**
+     * Get pointer to the PhysicsShapeCache singleton instance
+     *
+     * @return PhysicsShapeCache*
+     */
+    static PhysicsShapeCache *getInstance();
+
+    /**
+     * Adds all physics shapes from a plist file.
+     * Shapes are scaled by contentScaleFactor
+     *
+     * @param plist name of the shape definitions file to load
+     *
+     * @retval true if ok
+     * @retval false on error
+     */
+    bool addShapesWithFile(const std::string &plist);
+
+    /**
+     * Adds all physics shapes from a plist file.
+     *
+     * @param plist name of the shape definitions file to load
+     * @param scaleFactor scale factor to apply for all shapes
+     *
+     * @retval true if ok
+     * @retval false on error
+     */
+    bool addShapesWithFile(const std::string &plist, float scaleFactor);
+
+    /**
+     * Removes all shapes loaded from the given file
+     *
+     * @param plist name of the body definitions file
+     */
+    void removeShapesWithFile(const std::string &plist);
+
+    /**
+     * Removes all shapes
+     */
+    void removeAllShapes();
+
+    /**
+     * Creates a PhysicsBody with the given name
+     *
+     * @param name name of the body to create
+     *
+     * @return new PhysicsBody
+     * @retval nullptr if body is not found
+     */
+    cocos2d::PhysicsBody *createBodyWithName(const std::string &name);
+
+    /**
+     * Creates a new PhysicsBody and attaches it to the given sprite
+     *
+     * @param name name of the body to attach
+     * @param sprite sprite to attach the body to
+     *
+     * @retval true if body was attached to the sprite
+     * @retval false if body was not found
+     */
+    bool setBodyOnSprite(const std::string &name, cocos2d::Sprite *sprite);
+
+private:
+    typedef enum
+    {
+        FIXTURE_POLYGON,
+        FIXTURE_CIRCLE
+    } FixtureType;
+
+
+    class Polygon
+    {
+    public:
+        cocos2d::Point* vertices;
+        int numVertices;
+    };
+
+
+    class FixtureData
+    {
+    public:
+        FixtureType fixtureType;
+
+        float density;
+        float restitution;
+        float friction;
+
+        int tag;
+        int group;
+        int categoryMask;
+        int collisionMask;
+        int contactTestMask;
+
+        // for circles
+        cocos2d::Point center;
+        float radius;
+
+
+        std::vector<Polygon *> polygons;
+    };
+
+
+    class BodyDef
+    {
+    public:
+        cocos2d::Point anchorPoint;
+        std::vector<FixtureData *> fixtures;
+
+        bool isDynamic;
+        bool affectedByGravity;
+        bool allowsRotation;
+
+        float linearDamping;
+        float angularDamping;
+        float velocityLimit;
+        float angularVelocityLimit;
+    };
+
+    PhysicsShapeCache();
+    ~PhysicsShapeCache();
+    void safeDeleteBodyDef(BodyDef *bodyDef);
+    BodyDef *getBodyDef(const std::string &name);
+    void setBodyProperties(cocos2d::PhysicsBody *body, BodyDef *bd);
+    void setShapeProperties(cocos2d::PhysicsShape *shape, FixtureData *fd);
+
+    std::map<std::string, BodyDef *> bodyDefs;
+    std::map<std::string, std::vector<BodyDef *>> bodiesInFile;
+};
+
+
+#endif // __PhysicsShapeCache_h
diff --git a/BB_Bomb/Classes/bailinUtils/BailinBaseLayer.h b/BB_Bomb/Classes/bailinUtils/BailinBaseLayer.h
new file mode 100644
index 0000000..9b0b72f
--- /dev/null
+++ b/BB_Bomb/Classes/bailinUtils/BailinBaseLayer.h
@@ -0,0 +1,71 @@
+﻿/*
+ * =====================================================================================
+ *
+ *       Filename:  BailinBaseLayer.h
+ *
+ *    Description:  百灵库中，UI界面继承的基类，封装了一些简便的函数用以处理一些通用功能
+ *
+ *        Version:  1.0
+ *        Created:  07/02/2015 15:56:55
+ *       Revision:  none
+ *       Compiler:  gcc
+ *
+ *         Author:  Jason Tou (), sosoayaen@gmail.com
+ *   Organization:
+ *
+ * =====================================================================================
+ */
+
+#pragma once
+
+#include "cocos2d.h"
+#include "bailinMacro.h"
+ // #include "bailinEvent.h"
+
+NS_BL_UI_BEGIN
+
+class BailinBaseLayer : public cocos2d::Layer
+{
+public:
+
+	virtual void onExit() override
+	{
+		////////////////////////
+		// onExit中处理，移除CustomListener
+		removeAllCustomListener();
+
+		cocos2d::Layer::onExit();
+	}
+
+	/**
+	 * @brief 添加自定义监听事件
+	 */
+	virtual cocos2d::EventListenerCustom* addCustomEventListener(const std::string &eventName, const std::function<void(cocos2d::EventCustom*)>& callback)
+	{
+		auto listener = _eventDispatcher->addCustomEventListener(eventName, callback);
+		m_listEventListenerCustom.push_back(listener);
+		return listener;
+	}
+
+protected:
+
+	// 移除当前层的所有自定义通知
+	void removeAllCustomListener()
+	{
+		// 移除注册的事件
+		for (auto l : m_listEventListenerCustom)
+		{
+			_eventDispatcher->removeEventListener(l);
+		}
+
+		// 顺便清空下
+		m_listEventListenerCustom.clear();
+
+	}
+
+protected:
+	// 保存自定义监听的链表，出场景的时候删除
+	std::list<cocos2d::EventListenerCustom*> m_listEventListenerCustom;
+};
+
+NS_BL_UI_END
diff --git a/BB_Bomb/Classes/bailinUtils/DialogLayer.cpp b/BB_Bomb/Classes/bailinUtils/DialogLayer.cpp
new file mode 100644
index 0000000..50c66df
--- /dev/null
+++ b/BB_Bomb/Classes/bailinUtils/DialogLayer.cpp
@@ -0,0 +1,297 @@
+﻿/*
+ * =====================================================================================
+ *
+ *       Filename:  DialogLayer.cpp
+ *
+ *    Description:
+ *
+ *        Version:  2.0
+ *        Created:  01/17/2015 14:32:41
+ *       Revision:  none
+ *       Compiler:  gcc
+ *
+ *         Author:  Jason Tou (), sosoayaen@gmail.com
+ *   Organization:
+ *
+ * =====================================================================================
+ */
+
+#include "DialogLayer.h"
+
+USING_NS_CC;
+
+NS_BL_UI_BEGIN
+DialogLayer::~DialogLayer()
+{
+	// 释放动作动画
+	CC_SAFE_RELEASE_NULL(m_pBoardOnEnterAction);
+	CC_SAFE_RELEASE_NULL(m_pBoardOnExitAction);
+
+	// 移除监听
+	_eventDispatcher->removeEventListener(m_pEventListener);
+}
+
+bool DialogLayer::isMainBoardContainTouch(Touch* touch)
+{
+	bool bRet = false;
+
+	if (m_pMainBoardNode && m_pMainBoardNode->getParent())
+	{
+		Rect rect = m_pMainBoardNode->getBoundingBox();
+		rect.origin = m_pMainBoardNode->getParent()->convertToWorldSpace(rect.origin);
+		bRet = rect.containsPoint(touch->getLocation());
+	}
+	return bRet;
+}
+
+void DialogLayer::initTouchListener()
+{
+	// 吞噬
+	m_pEventListener = EventListenerTouchOneByOne::create();
+	m_pEventListener->setSwallowTouches(true);
+
+	m_pEventListener->onTouchBegan = CC_CALLBACK_2(DialogLayer::onTouchBeganCallback, this);
+
+	m_pEventListener->onTouchMoved = CC_CALLBACK_2(DialogLayer::onTouchMovedCallback, this);
+
+	m_pEventListener->onTouchCancelled = CC_CALLBACK_2(DialogLayer::onTouchCancelledCallback, this);
+
+	m_pEventListener->onTouchEnded = CC_CALLBACK_2(DialogLayer::onTouchEndedCallback, this);
+
+	_eventDispatcher->addEventListenerWithSceneGraphPriority(m_pEventListener, this);
+}
+
+static bool bailinIsVisible(cocos2d::Node* pNode)
+{
+	bool bRet = false;
+	do
+	{
+		CC_BREAK_IF(!pNode || !pNode->isVisible() || !pNode->getParent());
+
+		auto parent = pNode->getParent();
+		for (auto c = parent; c != nullptr; c = c->getParent())
+		{
+			if (!c->isVisible())
+			{
+				return false;
+			}
+		}
+
+		bRet = true;
+
+	} while (0);
+
+	return bRet;
+}
+
+bool DialogLayer::onTouchBeganCallback(cocos2d::Touch *touch, cocos2d::Event *event)
+{
+	m_pEventListener->setSwallowTouches(true);
+
+	// 判断下是否在控件内部点击
+	if (m_pMainBoardNode && m_pMainBoardNode->getParent())
+	{
+		if (!this->isMainBoardContainTouch(touch))
+		{
+			m_bTouchOutMainboard = true;
+		}
+	}
+
+	// 这里处理穿透性点击事件
+	for (auto iter : m_mapTouchNodes)
+	{
+		// 首先判断对应的控件是否可见，不可见就不用折腾了
+		if (!bailinIsVisible(iter.second))
+			continue;
+
+		// 首先处理下按钮，因为内部会有额外处理
+		auto menu = dynamic_cast<Menu*>(iter.second);
+		if (menu)
+		{
+			for (auto menuitem : menu->getChildren())
+			{
+				if (menuitem->isVisible())
+				{
+					Rect r = menuitem->getBoundingBox();
+					// 如果点击到了内部的按钮，就穿透响应，把点击事件传递下去，并且本层不响应
+					if (r.containsPoint(menu->convertToNodeSpace(touch->getLocation())))
+					{
+						m_pEventListener->setSwallowTouches(false);
+						return false;
+					}
+				}
+			}
+		}
+		else
+		{
+			bool bVisible = bailinIsVisible(iter.second);
+			if (bVisible)
+			{
+				Rect r = iter.second->getBoundingBox();
+				// 如果点击到了穿透的区域，就穿透响应，把点击事件传递下去，并且本层不响应
+				if (r.containsPoint(iter.second->getParent()->convertToNodeSpace(touch->getLocation())))
+				{
+					m_pEventListener->setSwallowTouches(false);
+					return false;
+				}
+			}
+		}
+	}
+
+	return true;
+}
+
+void DialogLayer::onTouchMovedCallback(cocos2d::Touch *touch, cocos2d::Event *event)
+{
+
+}
+
+void DialogLayer::onTouchCancelledCallback(cocos2d::Touch *touch, cocos2d::Event *event)
+{
+	m_bTouchOutMainboard = false;
+}
+
+void DialogLayer::onTouchEndedCallback(cocos2d::Touch *touch, cocos2d::Event *event)
+{
+	retain();
+	// 判断下是否是点击到外面去了
+	if (m_bTouchOutMainboard  && m_pMainBoardNode && m_pMainBoardNode->getParent())
+	{
+		if (!this->isMainBoardContainTouch(touch))
+		{
+			// 点击到外部释放的回调
+			if (m_clickOutSideCallback)
+				m_clickOutSideCallback();
+
+			if (m_bClickOutsideClose)
+				// 点击到外面去了，关掉对话框
+				closeDialog();
+		}
+	}
+	m_bTouchOutMainboard = false;
+	release();
+}
+
+bool DialogLayer::init()
+{
+	bool bRet = false;
+
+	do
+	{
+		CC_BREAK_IF(!BailinBaseLayer::init());
+
+		CC_BREAK_IF(!initMainBoard());
+
+		// 把默认颜色设置为半透明的黑色
+		m_pLayerColorBg = LayerColor::create(Color4B(0, 0, 0, 128), _contentSize.width, _contentSize.height);
+		addChild(m_pLayerColorBg);
+
+		initTouchListener();
+
+		bRet = true;
+	} while (0);
+
+	return bRet;
+}
+
+void DialogLayer::setOpacity(GLubyte opacity)
+{
+	BailinBaseLayer::setOpacity(opacity);
+
+	m_pLayerColorBg->setOpacity(opacity);
+}
+
+void DialogLayer::setOnEnterAction(cocos2d::ActionInterval *pOnEnterAction)
+{
+	CC_SAFE_RELEASE_NULL(m_pBoardOnEnterAction);
+	m_pBoardOnEnterAction = pOnEnterAction;
+	CC_SAFE_RETAIN(m_pBoardOnEnterAction);
+}
+
+void DialogLayer::setOnExitAction(cocos2d::ActionInterval *pOnExitAction)
+{
+	CC_SAFE_RELEASE_NULL(m_pBoardOnExitAction);
+	m_pBoardOnExitAction = pOnExitAction;
+	CC_SAFE_RETAIN(m_pBoardOnExitAction);
+}
+
+void DialogLayer::closeDialog()
+{
+	if (m_closeCallbackBefore)
+		m_closeCallbackBefore();
+
+	// 有出场动画就播放一下
+	if (m_pMainBoardNode && m_pBoardOnExitAction)
+	{
+		m_pMainBoardNode->runAction(Sequence::create(m_pBoardOnExitAction, CallFunc::create([=]() {
+			if (m_closeCallback)
+				m_closeCallback();
+			// 先移除所有子节点
+			removeAllChildren();
+			// 把整个Dialog层移除
+			removeFromParent();
+		}), NULL));
+	}
+	else
+	{
+		if (m_closeCallback)
+			m_closeCallback();
+		// 先移除所有子节点
+		removeAllChildren();
+		// 直接移除即可
+		removeFromParent();
+	}
+}
+
+void DialogLayer::setMainBoardNode(cocos2d::Node *pMainBoardNode)
+{
+	// 这里是弱引用，通过此函数设置主面板表示节点是在外面创建的
+	m_pMainBoardNode = pMainBoardNode;
+}
+
+void DialogLayer::addMainBoardNode(cocos2d::Node *pMainBoardNode, cocos2d::ActionInterval *pOnEnterAction, cocos2d::ActionInterval *pOnExitAction)
+{
+	if (pMainBoardNode)
+	{
+		m_pMainBoardNode = pMainBoardNode;
+		// 默认当前主面板即为可视面板
+		if (pMainBoardNode->getParent() == NULL)
+		{
+			addChild(pMainBoardNode);
+		}
+	}
+
+	setOnEnterAction(pOnEnterAction);
+	setOnExitAction(pOnExitAction);
+}
+
+void DialogLayer::setClickOutsideCloseDialog(bool bStatus)
+{
+	m_bClickOutsideClose = bStatus;
+}
+
+void DialogLayer::onEnter()
+{
+	BailinBaseLayer::onEnter();
+
+	// 这里如果有进场动画就播放一下
+	if (m_pMainBoardNode && m_pBoardOnEnterAction)
+	{
+		m_pMainBoardNode->stopAllActions();
+		m_pMainBoardNode->runAction(m_pBoardOnEnterAction);
+	}
+}
+
+void DialogLayer::onExit()
+{
+
+	BailinBaseLayer::onExit();
+}
+
+void DialogLayer::showModalDialog(int nZOrder)
+{
+	this->setLocalZOrder(nZOrder);
+	Director::getInstance()->getRunningScene()->addChild(this);
+}
+
+NS_BL_UI_END
diff --git a/BB_Bomb/Classes/bailinUtils/DialogLayer.h b/BB_Bomb/Classes/bailinUtils/DialogLayer.h
new file mode 100644
index 0000000..7eb4e70
--- /dev/null
+++ b/BB_Bomb/Classes/bailinUtils/DialogLayer.h
@@ -0,0 +1,174 @@
+﻿/*
+ * =====================================================================================
+ *
+ *       Filename:  DialogLayer.h
+ *
+ *    Description:  对话框类，提供模态和非模态对话框的实现
+ *                  本类只适合cocos2d-x 3.x以上版本，并且需要支持C++11标准的编译器
+ *
+ *        Version:  2.0
+ *        Created:  01/17/2015 14:29:28
+ *       Revision:  none
+ *       Compiler:  gcc
+ *
+ *         Author:  Jason Tou (), sosoayaen@gmail.com
+ *   Organization:  
+ *
+ * =====================================================================================
+ */
+
+#pragma once
+
+#include "cocos2d.h"
+#include "BailinBaseLayer.h"
+#include "bailinMacro.h"
+
+NS_BL_UI_BEGIN
+
+class DialogLayer : public BailinBaseLayer
+{
+public:
+    typedef std::function<void()> closeCallback;
+    typedef std::function<void()> clickOutSideCallback;
+    
+	CREATE_FUNC(DialogLayer);
+    
+    ~DialogLayer();
+    
+    virtual bool init() override;
+    
+    virtual void onEnter() override;
+    virtual void onExit() override;
+    
+    virtual void setOpacity(GLubyte opacity) override;
+    
+private:
+    /**
+     * @brief 初始化主面板，默认返回为true，子类继承后可以在这里初始化主面板
+     */
+    virtual bool initMainBoard() {  return true;    };
+    
+    /**
+     * @brief 内部使用，判断是否点击在主面板上
+     */
+    bool isMainBoardContainTouch(cocos2d::Touch* touch);
+    
+public:
+    
+    // 设置进场出场动画
+    virtual void setOnEnterAction(cocos2d::ActionInterval* pOnEnterAction);
+    virtual void setOnExitAction(cocos2d::ActionInterval* pOnExitAction);
+    
+    /**
+     * @brief 设置主面板，顺便设置面板的进场和出场动画效果。
+     *        默认是模态对话框，并且按下主面板外区域即可关闭对话框，如果不需要此功能，请设置点击区域外关闭属性
+     * @param pMainBoardNode 主面板节点，会把此节点
+     */
+    virtual void addMainBoardNode(cocos2d::Node* pMainBoardNode, cocos2d::ActionInterval* pOnEnterAction = nullptr, cocos2d::ActionInterval* pOnExitAction = nullptr);
+    
+    /**
+     * @brief 设置点击到主面板外是否关闭对话框，默认是开启的
+     */
+    void setClickOutsideCloseDialog(bool bStatus);
+    
+    // 这里是弱引用，通过此函数设置主面板表示节点是在外面创建的，请不要随意调用此函数，除非你清楚知道你在做什么
+    virtual void setMainBoardNode(cocos2d::Node* pMainBoardNode);
+    
+    // 关闭对话框
+    virtual void closeDialog();
+    
+    /**
+     * @brief 显示模态对话框，这个是用来直接把对话框丢到整个场景之上的
+     * @param nZOrder Z轴，某些对话框要求在最前面，则可以填入这个值
+     */
+    virtual void showModalDialog(int nZOrder = 0);
+    
+    // 结束回调函数
+    void setCloseCallback(const closeCallback& callback)
+    {
+        m_closeCallback = callback;
+    }
+    
+    // 结束回调，在出场动画开始前调用
+    void setCloseBeforeCallback(const closeCallback& callback)
+    {
+        m_closeCallbackBefore = callback;
+    }
+    
+	// 点击到外部的函数
+    void setClickOutSideCallback(const clickOutSideCallback& callback)
+    {
+        m_clickOutSideCallback = callback;
+    }
+
+    /**
+     * @brief 注册一个在DialogLayer可响应点击的控件，先判断本层的响应，再判断注册进来的对象
+     */
+    void registerTouchNode(cocos2d::Node* pNode)
+    {
+        m_mapTouchNodes[pNode] = pNode;
+    }
+    
+    void unregisterTouchNode(cocos2d::Node* pNode)
+    {
+        auto iter = m_mapTouchNodes.find(pNode);
+        if (iter != m_mapTouchNodes.cend())
+        {
+            m_mapTouchNodes.erase(iter);
+        }
+	}
+    
+    void setBackgroundOpacity(GLbyte opacity)
+    {
+        m_pLayerColorBg->setOpacity(opacity);
+    }
+    
+    void setBackgroundColor(cocos2d::Color3B color)
+    {
+        m_pLayerColorBg->setColor(color);
+    }
+    
+protected:
+    // 初始化当前层的吞噬效果
+    void initTouchListener();
+    
+    bool onTouchBeganCallback(cocos2d::Touch* touch, cocos2d::Event* event);
+    void onTouchMovedCallback(cocos2d::Touch* touch, cocos2d::Event* event);
+    void onTouchCancelledCallback(cocos2d::Touch* touch, cocos2d::Event* event);
+    void onTouchEndedCallback(cocos2d::Touch* touch, cocos2d::Event* event);
+
+protected:
+    // 盖住整个框框的背景
+    cocos2d::LayerColor* m_pLayerColorBg = nullptr;
+    
+    // 主面板
+    cocos2d::Node* m_pMainBoardNode = nullptr;
+
+    // 进出场动画
+    cocos2d::FiniteTimeAction* m_pBoardOnEnterAction = nullptr;
+    cocos2d::FiniteTimeAction* m_pBoardOnExitAction = nullptr;
+    
+    // 是否点击主面板外的区域关闭对话框
+    bool m_bClickOutsideClose = true;
+    
+    // 为了吞噬事件用的监听
+    cocos2d::EventListenerTouchOneByOne* m_pEventListener = nullptr;
+    
+    // 表明是否在当前层上按下
+    bool m_bTouchOutMainboard = false;
+    
+    // 关闭回调
+    closeCallback m_closeCallback = nullptr;
+    // 关闭函数开始回调
+    closeCallback m_closeCallbackBefore = nullptr;
+    // 点击外部区域回调
+    clickOutSideCallback m_clickOutSideCallback = nullptr;
+
+	// 注册穿透点击的控件哈希表
+	std::unordered_map<cocos2d::Node*, cocos2d::Node*> m_mapTouchNodes;
+    
+private:
+
+};
+
+NS_BL_UI_END
diff --git a/BB_Bomb/Classes/bailinUtils/bailinMacro.h b/BB_Bomb/Classes/bailinUtils/bailinMacro.h
new file mode 100644
index 0000000..58f769e
--- /dev/null
+++ b/BB_Bomb/Classes/bailinUtils/bailinMacro.h
@@ -0,0 +1,61 @@
+﻿/*
+ * =====================================================================================
+ *
+ *       Filename:  bailinMacro.h
+ *
+ *    Description:  百灵的一些公共宏定义
+ *					这里必须支持C++11标准
+ *
+ *        Version:  1.0
+ *        Created:  01/03/2015 15:28:17
+ *       Revision:  none
+ *       Compiler:  gcc
+ *
+ *         Author:  Jason Tou (), sosoayaen@gmail.com
+ *   Organization:  
+ *
+ * =====================================================================================
+ */
+
+#pragma once
+
+#ifdef WIN32
+#	include "cocos2d.h"
+#endif
+
+// 百灵命名空间
+#define NS_BL_BEGIN namespace bailin {
+#define NS_BL_END	}
+#define USING_NS_BL using namespace bailin
+
+// 定义百灵工具命名空间
+#define NS_BL_UTIL_BEGIN namespace bailin { namespace util {
+#define NS_BL_UTIL_END }}
+#define USING_NS_BL_UTIL using namespace bailin::util
+
+// 定义UI相关的命名空间
+#define NS_BL_UI_BEGIN namespace bailin { namespace ui {
+#define NS_BL_UI_END }}
+#define USING_NS_BL_UI using namespace bailin::ui
+
+// 定义新手引导相关命名空间
+#define NS_BL_GUIDE_BEGIN namespace bailin { namespace guide {
+#define NS_BL_GUIDE_END }}
+#define USING_NS_BL_GUIDE using namespace bailin::guide
+
+#define BREAK_IF(cond) if (cond) break
+#define CONTINUE_IF(cond) if (cond) continue
+#define RETURN_IF(cond) if (cond) return
+
+// 清除 std 的一些容器
+#define CLEAR_REF_ARRAY(container) for (auto pData : container) \
+    {\
+        if (pData) {delete pData; } \
+    }\
+    container.clear()
+
+#define CLEAR_REF_MAP(map) for (auto iter : map) \
+    {\
+        if (iter.second) {delete iter.second; } \
+    }\
+    map.clear()
diff --git a/BB_Bomb/Classes/main.cpp b/BB_Bomb/Classes/main.cpp
deleted file mode 100644
index f323619..0000000
--- a/BB_Bomb/Classes/main.cpp
+++ /dev/null
@@ -1,18 +0,0 @@
-#include "main.h"
-#include "AppDelegate.h"
-#include "cocos2d.h"
-
-USING_NS_CC;
-
-int WINAPI _tWinMain(HINSTANCE hInstance,
-                       HINSTANCE hPrevInstance,
-                       LPTSTR    lpCmdLine,
-                       int       nCmdShow)
-{
-    UNREFERENCED_PARAMETER(hPrevInstance);
-    UNREFERENCED_PARAMETER(lpCmdLine);
-
-    // create the application instance
-    AppDelegate app;
-    return Application::getInstance()->run();
-}
diff --git a/BB_Bomb/Classes/main.h b/BB_Bomb/Classes/main.h
deleted file mode 100644
index 095e227..0000000
--- a/BB_Bomb/Classes/main.h
+++ /dev/null
@@ -1,13 +0,0 @@
-#ifndef __MAIN_H__
-#define __MAIN_H__
-
-#define WIN32_LEAN_AND_MEAN             // Exclude rarely-used stuff from Windows headers
-
-// Windows Header Files:
-#include <windows.h>
-#include <tchar.h>
-
-// C RunTime Header Files
-#include "platform/CCStdC.h"
-
-#endif    // __MAIN_H__
diff --git a/BB_Bomb/Classes/resource.h b/BB_Bomb/Classes/resource.h
deleted file mode 100644
index 376870b..0000000
--- a/BB_Bomb/Classes/resource.h
+++ /dev/null
@@ -1,20 +0,0 @@
-//{{NO_DEPENDENCIES}}
-// Microsoft Visual C++ generated include file.
-// Used by game.RC
-//
-
-#define IDS_PROJNAME                100
-#define IDR_TESTJS    100
-
-#define ID_FILE_NEW_WINDOW            32771
-
-// Next default values for new objects
-// 
-#ifdef APSTUDIO_INVOKED
-#ifndef APSTUDIO_READONLY_SYMBOLS
-#define _APS_NEXT_RESOURCE_VALUE    201
-#define _APS_NEXT_CONTROL_VALUE        1000
-#define _APS_NEXT_SYMED_VALUE        101
-#define _APS_NEXT_COMMAND_VALUE        32775
-#endif
-#endif
diff --git a/BB_Bomb/Resources/fonts/Marker Felt.ttf b/BB_Bomb/Resources/fonts/Marker Felt.ttf
deleted file mode 100644
index 3752ef3..0000000
Binary files a/BB_Bomb/Resources/fonts/Marker Felt.ttf and /dev/null differ
diff --git a/BB_Bomb/Resources/fonts/arial.ttf b/BB_Bomb/Resources/fonts/arial.ttf
deleted file mode 100644
index abc899c..0000000
Binary files a/BB_Bomb/Resources/fonts/arial.ttf and /dev/null differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/Forts/bb_fort_1.png b/BB_Bomb/Resources/res/BB_Bomb/Image/Forts/bb_fort_1.png
new file mode 100644
index 0000000..3a2b342
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/Forts/bb_fort_1.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/balls/default.png b/BB_Bomb/Resources/res/BB_Bomb/Image/balls/default.png
new file mode 100644
index 0000000..c1ee102
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/balls/default.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_arrow1.png b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_arrow1.png
deleted file mode 100644
index 52afd50..0000000
Binary files a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_arrow1.png and /dev/null differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_arrow2.png b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_arrow2.png
deleted file mode 100644
index 7f328b5..0000000
Binary files a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_arrow2.png and /dev/null differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_arrow3.png b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_arrow3.png
deleted file mode 100644
index bc0b8c1..0000000
Binary files a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_arrow3.png and /dev/null differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_arrow4.png b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_arrow4.png
deleted file mode 100644
index 63f5aef..0000000
Binary files a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_arrow4.png and /dev/null differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_background_make_up.png b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_background_make_up.png
new file mode 100644
index 0000000..7ce432d
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_background_make_up.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_bar.png b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_bar.png
new file mode 100644
index 0000000..1d3d1f7
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_bar.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_black_hole.png b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_black_hole.png
index e664c39..eff4cfc 100644
Binary files a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_black_hole.png and b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_black_hole.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_bomb_background.png b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_bomb_background.png
new file mode 100644
index 0000000..0c1e089
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_bomb_background.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_crown.png b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_crown.png
deleted file mode 100644
index bb1be5c..0000000
Binary files a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_crown.png and /dev/null differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_dotted_line.png b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_dotted_line.png
index dfc73a6..2d11651 100644
Binary files a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_dotted_line.png and b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_dotted_line.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_end_carry_on.png b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_end_carry_on.png
deleted file mode 100644
index 987f2b5..0000000
Binary files a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_end_carry_on.png and /dev/null differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_fort.png b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_fort.png
deleted file mode 100644
index a5af520..0000000
Binary files a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_fort.png and /dev/null differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_game_background.png b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_game_background.png
new file mode 100644
index 0000000..1e3886b
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_game_background.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_home_background.png b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_home_background.png
new file mode 100644
index 0000000..e4f04ae
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_home_background.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_home_bottom.png b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_home_bottom.png
new file mode 100644
index 0000000..4a6a137
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_home_bottom.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_home_start.png b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_home_start.png
deleted file mode 100644
index b807c2b..0000000
Binary files a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_home_start.png and /dev/null differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_block_nome.png b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_prompt_ring.png
similarity index 76%
rename from BB_Bomb/Resources/res/BB_Bomb/Image/bb_block_nome.png
rename to BB_Bomb/Resources/res/BB_Bomb/Image/bb_prompt_ring.png
index 14651de..f82666f 100644
Binary files a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_block_nome.png and b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_prompt_ring.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_recycling_button.png b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_recycling_button.png
index f8302bc..ceb9dd0 100644
Binary files a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_recycling_button.png and b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_recycling_button.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_octagon.png b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_score_background.png
similarity index 88%
rename from BB_Bomb/Resources/res/BB_Bomb/Image/bb_octagon.png
rename to BB_Bomb/Resources/res/BB_Bomb/Image/bb_score_background.png
index 3025091..58a9d06 100644
Binary files a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_octagon.png and b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_score_background.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_settlement.png b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_settlement.png
new file mode 100644
index 0000000..8e30a28
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/bb_settlement.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_bomb.png b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/1_1.png
similarity index 75%
rename from BB_Bomb/Resources/res/BB_Bomb/Image/bb_bomb.png
rename to BB_Bomb/Resources/res/BB_Bomb/Image/blocks/1_1.png
index d4fc799..f7cb363 100644
Binary files a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_bomb.png and b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/1_1.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/1_2.png b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/1_2.png
new file mode 100644
index 0000000..39a8888
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/1_2.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/1_3.png b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/1_3.png
new file mode 100644
index 0000000..a6034bb
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/1_3.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_addFood.png b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/2_1.png
similarity index 75%
rename from BB_Bomb/Resources/res/BB_Bomb/Image/bb_addFood.png
rename to BB_Bomb/Resources/res/BB_Bomb/Image/blocks/2_1.png
index d4fc799..bb2f2c0 100644
Binary files a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_addFood.png and b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/2_1.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_block_half.png b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/2_2.png
similarity index 69%
rename from BB_Bomb/Resources/res/BB_Bomb/Image/bb_block_half.png
rename to BB_Bomb/Resources/res/BB_Bomb/Image/blocks/2_2.png
index eb29bfc..902a798 100644
Binary files a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_block_half.png and b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/2_2.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/2_3.png b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/2_3.png
new file mode 100644
index 0000000..8e62cce
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/2_3.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_end_block.png b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/3_1.png
similarity index 73%
rename from BB_Bomb/Resources/res/BB_Bomb/Image/bb_end_block.png
rename to BB_Bomb/Resources/res/BB_Bomb/Image/blocks/3_1.png
index 386920a..ff6b7e1 100644
Binary files a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_end_block.png and b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/3_1.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/3_2.png b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/3_2.png
new file mode 100644
index 0000000..9ecd886
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/3_2.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/3_3.png b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/3_3.png
new file mode 100644
index 0000000..efab7a4
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/3_3.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/4_1.png b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/4_1.png
new file mode 100644
index 0000000..128dd88
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/4_1.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/4_2.png b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/4_2.png
new file mode 100644
index 0000000..ccc3d9c
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/4_2.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/4_3.png b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/4_3.png
new file mode 100644
index 0000000..8b8e135
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/4_3.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/5_1.png b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/5_1.png
new file mode 100644
index 0000000..410bbb8
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/5_1.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/5_2.png b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/5_2.png
new file mode 100644
index 0000000..644ed69
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/5_2.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/5_3.png b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/5_3.png
new file mode 100644
index 0000000..a7be4dc
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/5_3.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/6_1.png b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/6_1.png
new file mode 100644
index 0000000..8207343
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/6_1.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_arrow.png b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/6_2.png
similarity index 67%
rename from BB_Bomb/Resources/res/BB_Bomb/Image/bb_arrow.png
rename to BB_Bomb/Resources/res/BB_Bomb/Image/blocks/6_2.png
index e48baa8..d227638 100644
Binary files a/BB_Bomb/Resources/res/BB_Bomb/Image/bb_arrow.png and b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/6_2.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/6_3.png b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/6_3.png
new file mode 100644
index 0000000..3d4a812
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/Image/blocks/6_3.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/bmFnt/BB_num.fnt b/BB_Bomb/Resources/res/BB_Bomb/bmFnt/BB_num.fnt
deleted file mode 100644
index a4a3fad..0000000
--- a/BB_Bomb/Resources/res/BB_Bomb/bmFnt/BB_num.fnt
+++ /dev/null
@@ -1,99 +0,0 @@
-info face="ADELE" size=-50 bold=1 italic=0 charset="" unicode=1 stretchH=100 smooth=1 aa=1 padding=0,0,0,0 spacing=1,1 outline=0
-common lineHeight=51 base=39 scaleW=256 scaleH=256 pages=1 packed=0 alphaChnl=0 redChnl=4 greenChnl=4 blueChnl=4
-page id=0 file="BB_num.png"
-chars count=95
-char id=32   x=167   y=76    width=3     height=1     xoffset=-1    yoffset=50    xadvance=10    page=0  chnl=15
-char id=33   x=249   y=142   width=5     height=34    xoffset=3     yoffset=5     xadvance=11    page=0  chnl=15
-char id=34   x=246   y=198   width=9     height=7     xoffset=2     yoffset=5     xadvance=12    page=0  chnl=15
-char id=35   x=198   y=183   width=24    height=23    xoffset=0     yoffset=5     xadvance=24    page=0  chnl=15
-char id=36   x=0     y=0     width=24    height=43    xoffset=1     yoffset=1     xadvance=27    page=0  chnl=15
-char id=37   x=77    y=79    width=34    height=34    xoffset=1     yoffset=5     xadvance=36    page=0  chnl=15
-char id=38   x=182   y=74    width=31    height=34    xoffset=1     yoffset=5     xadvance=32    page=0  chnl=15
-char id=39   x=52    y=238   width=5     height=7     xoffset=1     yoffset=5     xadvance=7     page=0  chnl=15
-char id=40   x=38    y=0     width=12    height=43    xoffset=1     yoffset=3     xadvance=14    page=0  chnl=15
-char id=41   x=25    y=0     width=12    height=43    xoffset=1     yoffset=3     xadvance=14    page=0  chnl=15
-char id=42   x=32    y=238   width=12    height=12    xoffset=3     yoffset=5     xadvance=18    page=0  chnl=15
-char id=43   x=230   y=198   width=15    height=13    xoffset=1     yoffset=17    xadvance=17    page=0  chnl=15
-char id=44   x=102   y=213   width=6     height=6     xoffset=1     yoffset=36    xadvance=8     page=0  chnl=15
-char id=45   x=167   y=74    width=10    height=1     xoffset=1     yoffset=30    xadvance=12    page=0  chnl=15
-char id=46   x=182   y=109   width=6     height=3     xoffset=1     yoffset=36    xadvance=8     page=0  chnl=15
-char id=47   x=51    y=0     width=20    height=42    xoffset=0     yoffset=3     xadvance=21    page=0  chnl=15
-char id=48   x=112   y=79    width=34    height=34    xoffset=3     yoffset=5     xadvance=40    page=0  chnl=15
-char id=49   x=245   y=72    width=8     height=34    xoffset=2     yoffset=5     xadvance=15    page=0  chnl=15
-char id=50   x=202   y=144   width=23    height=34    xoffset=1     yoffset=5     xadvance=26    page=0  chnl=15
-char id=51   x=167   y=113   width=26    height=34    xoffset=1     yoffset=5     xadvance=28    page=0  chnl=15
-char id=52   x=151   y=38    width=27    height=35    xoffset=0     yoffset=4     xadvance=28    page=0  chnl=15
-char id=53   x=0     y=151   width=25    height=34    xoffset=1     yoffset=5     xadvance=27    page=0  chnl=15
-char id=54   x=194   y=109   width=25    height=34    xoffset=1     yoffset=5     xadvance=27    page=0  chnl=15
-char id=55   x=52    y=151   width=25    height=34    xoffset=1     yoffset=5     xadvance=27    page=0  chnl=15
-char id=56   x=86    y=114   width=26    height=34    xoffset=1     yoffset=5     xadvance=28    page=0  chnl=15
-char id=57   x=113   y=114   width=26    height=34    xoffset=1     yoffset=5     xadvance=28    page=0  chnl=15
-char id=58   x=223   y=198   width=6     height=14    xoffset=1     yoffset=25    xadvance=8     page=0  chnl=15
-char id=59   x=18    y=221   width=6     height=17    xoffset=1     yoffset=25    xadvance=8     page=0  chnl=15
-char id=60   x=16    y=239   width=15    height=12    xoffset=1     yoffset=17    xadvance=17    page=0  chnl=15
-char id=61   x=58    y=238   width=15    height=6     xoffset=1     yoffset=20    xadvance=17    page=0  chnl=15
-char id=62   x=0     y=239   width=15    height=12    xoffset=1     yoffset=17    xadvance=17    page=0  chnl=15
-char id=63   x=45    y=186   width=20    height=34    xoffset=1     yoffset=5     xadvance=23    page=0  chnl=15
-char id=64   x=66    y=186   width=35    height=33    xoffset=1     yoffset=15    xadvance=37    page=0  chnl=15
-char id=65   x=120   y=42    width=30    height=35    xoffset=1     yoffset=4     xadvance=33    page=0  chnl=15
-char id=66   x=78    y=150   width=25    height=34    xoffset=4     yoffset=5     xadvance=31    page=0  chnl=15
-char id=67   x=147   y=78    width=34    height=34    xoffset=1     yoffset=5     xadvance=36    page=0  chnl=15
-char id=68   x=29    y=116   width=28    height=34    xoffset=4     yoffset=5     xadvance=34    page=0  chnl=15
-char id=69   x=178   y=148   width=23    height=34    xoffset=4     yoffset=5     xadvance=29    page=0  chnl=15
-char id=70   x=0     y=186   width=22    height=34    xoffset=4     yoffset=5     xadvance=28    page=0  chnl=15
-char id=71   x=39    y=80    width=37    height=34    xoffset=1     yoffset=5     xadvance=39    page=0  chnl=15
-char id=72   x=140   y=114   width=26    height=34    xoffset=4     yoffset=5     xadvance=34    page=0  chnl=15
-char id=73   x=246   y=107   width=5     height=34    xoffset=4     yoffset=5     xadvance=13    page=0  chnl=15
-char id=74   x=236   y=37    width=18    height=34    xoffset=1     yoffset=5     xadvance=23    page=0  chnl=15
-char id=75   x=129   y=149   width=24    height=34    xoffset=4     yoffset=5     xadvance=29    page=0  chnl=15
-char id=76   x=23    y=186   width=21    height=34    xoffset=4     yoffset=5     xadvance=26    page=0  chnl=15
-char id=77   x=52    y=43    width=36    height=35    xoffset=3     yoffset=4     xadvance=42    page=0  chnl=15
-char id=78   x=190   y=0     width=28    height=36    xoffset=4     yoffset=4     xadvance=36    page=0  chnl=15
-char id=79   x=0     y=81    width=38    height=34    xoffset=1     yoffset=5     xadvance=40    page=0  chnl=15
-char id=80   x=226   y=143   width=22    height=34    xoffset=4     yoffset=5     xadvance=28    page=0  chnl=15
-char id=81   x=151   y=0     width=38    height=37    xoffset=1     yoffset=5     xadvance=40    page=0  chnl=15
-char id=82   x=154   y=149   width=23    height=34    xoffset=4     yoffset=5     xadvance=29    page=0  chnl=15
-char id=83   x=104   y=149   width=24    height=34    xoffset=1     yoffset=5     xadvance=27    page=0  chnl=15
-char id=84   x=26    y=151   width=25    height=34    xoffset=1     yoffset=5     xadvance=27    page=0  chnl=15
-char id=85   x=220   y=108   width=25    height=34    xoffset=4     yoffset=5     xadvance=33    page=0  chnl=15
-char id=86   x=89    y=43    width=30    height=35    xoffset=1     yoffset=5     xadvance=33    page=0  chnl=15
-char id=87   x=6     y=44    width=45    height=35    xoffset=1     yoffset=5     xadvance=47    page=0  chnl=15
-char id=88   x=0     y=116   width=28    height=34    xoffset=2     yoffset=5     xadvance=31    page=0  chnl=15
-char id=89   x=214   y=73    width=30    height=34    xoffset=1     yoffset=5     xadvance=32    page=0  chnl=15
-char id=90   x=58    y=115   width=27    height=34    xoffset=1     yoffset=5     xadvance=29    page=0  chnl=15
-char id=91   x=140   y=0     width=10    height=41    xoffset=3     yoffset=4     xadvance=14    page=0  chnl=15
-char id=92   x=72    y=0     width=19    height=42    xoffset=2     yoffset=3     xadvance=21    page=0  chnl=15
-char id=93   x=129   y=0     width=10    height=41    xoffset=1     yoffset=4     xadvance=14    page=0  chnl=15
-char id=94   x=151   y=76    width=12    height=1     xoffset=1     yoffset=26    xadvance=14    page=0  chnl=15
-char id=95   x=151   y=74    width=15    height=1     xoffset=-1    yoffset=44    xadvance=13    page=0  chnl=15
-char id=96   x=45    y=238   width=6     height=7     xoffset=8     yoffset=13    xadvance=26    page=0  chnl=15
-char id=97   x=52    y=221   width=19    height=16    xoffset=1     yoffset=23    xadvance=22    page=0  chnl=15
-char id=98   x=179   y=38    width=19    height=35    xoffset=2     yoffset=4     xadvance=22    page=0  chnl=15
-char id=99   x=111   y=213   width=17    height=16    xoffset=1     yoffset=23    xadvance=18    page=0  chnl=15
-char id=100  x=199   y=37    width=19    height=35    xoffset=1     yoffset=4     xadvance=22    page=0  chnl=15
-char id=101  x=92    y=220   width=18    height=16    xoffset=1     yoffset=23    xadvance=20    page=0  chnl=15
-char id=102  x=235   y=0     width=10    height=36    xoffset=1     yoffset=3     xadvance=12    page=0  chnl=15
-char id=103  x=142   y=184   width=19    height=27    xoffset=1     yoffset=23    xadvance=22    page=0  chnl=15
-char id=104  x=219   y=37    width=16    height=35    xoffset=2     yoffset=4     xadvance=20    page=0  chnl=15
-char id=105  x=192   y=183   width=5     height=25    xoffset=2     yoffset=14    xadvance=9     page=0  chnl=15
-char id=106  x=246   y=0     width=9     height=36    xoffset=-2    yoffset=14    xadvance=9     page=0  chnl=15
-char id=107  x=219   y=0     width=15    height=36    xoffset=2     yoffset=3     xadvance=17    page=0  chnl=15
-char id=108  x=0     y=44    width=5     height=36    xoffset=2     yoffset=3     xadvance=9     page=0  chnl=15
-char id=109  x=25    y=221   width=26    height=16    xoffset=2     yoffset=23    xadvance=30    page=0  chnl=15
-char id=110  x=129   y=212   width=16    height=16    xoffset=2     yoffset=23    xadvance=20    page=0  chnl=15
-char id=111  x=72    y=220   width=19    height=16    xoffset=1     yoffset=23    xadvance=21    page=0  chnl=15
-char id=112  x=102   y=185   width=19    height=27    xoffset=2     yoffset=23    xadvance=22    page=0  chnl=15
-char id=113  x=122   y=184   width=19    height=27    xoffset=1     yoffset=23    xadvance=22    page=0  chnl=15
-char id=114  x=211   y=207   width=11    height=16    xoffset=2     yoffset=23    xadvance=13    page=0  chnl=15
-char id=115  x=196   y=209   width=14    height=16    xoffset=1     yoffset=23    xadvance=16    page=0  chnl=15
-char id=116  x=180   y=183   width=11    height=26    xoffset=1     yoffset=13    xadvance=13    page=0  chnl=15
-char id=117  x=146   y=212   width=16    height=16    xoffset=2     yoffset=23    xadvance=20    page=0  chnl=15
-char id=118  x=0     y=221   width=17    height=17    xoffset=0     yoffset=23    xadvance=17    page=0  chnl=15
-char id=119  x=223   y=179   width=27    height=18    xoffset=0     yoffset=22    xadvance=27    page=0  chnl=15
-char id=120  x=163   y=212   width=16    height=16    xoffset=1     yoffset=23    xadvance=18    page=0  chnl=15
-char id=121  x=162   y=184   width=17    height=27    xoffset=0     yoffset=23    xadvance=17    page=0  chnl=15
-char id=122  x=180   y=210   width=15    height=16    xoffset=1     yoffset=23    xadvance=17    page=0  chnl=15
-char id=123  x=113   y=0     width=15    height=41    xoffset=0     yoffset=4     xadvance=16    page=0  chnl=15
-char id=124  x=92    y=0     width=4     height=42    xoffset=4     yoffset=3     xadvance=12    page=0  chnl=15
-char id=125  x=97    y=0     width=15    height=41    xoffset=1     yoffset=4     xadvance=16    page=0  chnl=15
-char id=126  x=74    y=237   width=15    height=4     xoffset=1     yoffset=24    xadvance=17    page=0  chnl=15
diff --git a/BB_Bomb/Resources/res/BB_Bomb/bmFnt/BB_num.png b/BB_Bomb/Resources/res/BB_Bomb/bmFnt/BB_num.png
deleted file mode 100644
index ac294ad..0000000
Binary files a/BB_Bomb/Resources/res/BB_Bomb/bmFnt/BB_num.png and /dev/null differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/bmFnt/block_hp.fnt b/BB_Bomb/Resources/res/BB_Bomb/bmFnt/block_hp.fnt
new file mode 100644
index 0000000..2a511bc
--- /dev/null
+++ b/BB_Bomb/Resources/res/BB_Bomb/bmFnt/block_hp.fnt
@@ -0,0 +1,18 @@
+info face="??????Բ????" size=40 bold=0 italic=0 charset="" unicode=1 stretchH=100 smooth=1 aa=1 padding=1,1,1,1 spacing=0,0 outline=2
+common lineHeight=40 base=32 scaleW=256 scaleH=64 pages=1 packed=0 alphaChnl=0 redChnl=3 greenChnl=3 blueChnl=3
+page id=0 file="block_hp.png"
+chars count=14
+char id=32   x=242   y=0     width=7     height=7     xoffset=-3    yoffset=-3    xadvance=9     page=0  chnl=15
+char id=43   x=0     y=33    width=26    height=26    xoffset=-2    yoffset=10    xadvance=21    page=0  chnl=15
+char id=45   x=50    y=33    width=26    height=12    xoffset=-2    yoffset=17    xadvance=21    page=0  chnl=15
+char id=48   x=0     y=0     width=26    height=33    xoffset=-3    yoffset=3     xadvance=20    page=0  chnl=15
+char id=49   x=225   y=0     width=17    height=32    xoffset=-3    yoffset=3     xadvance=13    page=0  chnl=15
+char id=50   x=201   y=0     width=24    height=32    xoffset=-2    yoffset=3     xadvance=20    page=0  chnl=15
+char id=51   x=101   y=0     width=24    height=33    xoffset=-2    yoffset=3     xadvance=20    page=0  chnl=15
+char id=52   x=149   y=0     width=27    height=32    xoffset=-3    yoffset=3     xadvance=20    page=0  chnl=15
+char id=53   x=125   y=0     width=24    height=33    xoffset=-2    yoffset=3     xadvance=20    page=0  chnl=15
+char id=54   x=26    y=0     width=25    height=33    xoffset=-2    yoffset=3     xadvance=20    page=0  chnl=15
+char id=55   x=176   y=0     width=25    height=32    xoffset=-3    yoffset=3     xadvance=19    page=0  chnl=15
+char id=56   x=51    y=0     width=25    height=33    xoffset=-2    yoffset=3     xadvance=20    page=0  chnl=15
+char id=57   x=76    y=0     width=25    height=33    xoffset=-2    yoffset=3     xadvance=20    page=0  chnl=15
+char id=120  x=26    y=33    width=24    height=26    xoffset=-3    yoffset=9     xadvance=18    page=0  chnl=15
diff --git a/BB_Bomb/Resources/res/BB_Bomb/bmFnt/block_hp.png b/BB_Bomb/Resources/res/BB_Bomb/bmFnt/block_hp.png
new file mode 100644
index 0000000..0963685
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/bmFnt/block_hp.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/bmFnt/golden_score.fnt b/BB_Bomb/Resources/res/BB_Bomb/bmFnt/golden_score.fnt
new file mode 100644
index 0000000..5383e9d
--- /dev/null
+++ b/BB_Bomb/Resources/res/BB_Bomb/bmFnt/golden_score.fnt
@@ -0,0 +1,17 @@
+info face="????ͤ?غڼ???" size=70 bold=0 italic=0 charset="" unicode=1 stretchH=100 smooth=1 aa=4 padding=10,10,10,10 spacing=1,1 outline=0
+common lineHeight=70 base=50 scaleW=512 scaleH=256 pages=1 packed=0 alphaChnl=1 redChnl=0 greenChnl=0 blueChnl=0
+page id=0 file="golden_score.png"
+chars count=13
+char id=46   x=199   y=72    width=32    height=32    xoffset=-8    yoffset=33    xadvance=15    page=0  chnl=15
+char id=48   x=76    y=0     width=58    height=71    xoffset=-9    yoffset=-5    xadvance=41    page=0  chnl=15
+char id=49   x=61    y=75    width=47    height=69    xoffset=-9    yoffset=-4    xadvance=32    page=0  chnl=15
+char id=50   x=430   y=0     width=57    height=70    xoffset=-9    yoffset=-5    xadvance=39    page=0  chnl=15
+char id=51   x=135   y=0     width=58    height=71    xoffset=-8    yoffset=-5    xadvance=41    page=0  chnl=15
+char id=52   x=0     y=75    width=60    height=69    xoffset=-9    yoffset=-4    xadvance=41    page=0  chnl=15
+char id=53   x=371   y=0     width=58    height=70    xoffset=-9    yoffset=-4    xadvance=40    page=0  chnl=15
+char id=54   x=194   y=0     width=58    height=71    xoffset=-9    yoffset=-5    xadvance=40    page=0  chnl=15
+char id=55   x=109   y=72    width=57    height=68    xoffset=-9    yoffset=-3    xadvance=38    page=0  chnl=15
+char id=56   x=253   y=0     width=58    height=71    xoffset=-9    yoffset=-5    xadvance=41    page=0  chnl=15
+char id=57   x=312   y=0     width=58    height=71    xoffset=-9    yoffset=-5    xadvance=40    page=0  chnl=15
+char id=20998 x=0     y=0     width=75    height=74    xoffset=-10   yoffset=-7    xadvance=56    page=0  chnl=15
+char id=65292 x=167   y=72    width=31    height=42    xoffset=-7    yoffset=26    xadvance=56    page=0  chnl=15
diff --git a/BB_Bomb/Resources/res/BB_Bomb/bmFnt/golden_score.png b/BB_Bomb/Resources/res/BB_Bomb/bmFnt/golden_score.png
new file mode 100644
index 0000000..15b218a
Binary files /dev/null and b/BB_Bomb/Resources/res/BB_Bomb/bmFnt/golden_score.png differ
diff --git a/BB_Bomb/Resources/res/BB_Bomb/physicsBody/bb_octagon.plist b/BB_Bomb/Resources/res/BB_Bomb/physicsBody/bb_octagon.plist
new file mode 100644
index 0000000..daf2db6
--- /dev/null
+++ b/BB_Bomb/Resources/res/BB_Bomb/physicsBody/bb_octagon.plist
@@ -0,0 +1,82 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
+<plist version="1.0">
+    <dict>
+        <key>metadata</key>
+        <dict>
+            <key>format</key>
+            <integer>1</integer>
+        </dict>
+        <key>category_names</key>
+        <array>
+        </array>
+        <key>bodies</key>
+        <dict>
+
+            <key>bb_octagon</key>
+            <dict>
+                <key>anchorpoint</key>
+                <string>{ 0.50000,0.50000 }</string>
+                <key>is_dynamic</key>
+                <false/>
+                <key>affected_by_gravity</key>
+                <false/>
+                <key>allows_rotation</key>
+                <false/>
+                <key>linear_damping</key>
+                <real>0</real>
+                <key>velocity_limit</key>
+                <real>1e+6</real>
+                <key>angular_damping</key>
+                <real>0</real>
+                <key>angular_velocity_limit</key>
+                <real>1e+6</real>
+                <key>fixtures</key>
+                <array>
+
+                    <dict>
+                        <key>density</key>
+                        <real>1</real>
+                        <key>restitution</key>
+                        <real>0.2</real>
+                        <key>friction</key>
+                        <real>0.7</real>
+                        <key>tag</key>
+                        <integer>5</integer>
+                        <key>group</key>
+                        <integer>0</integer>
+                        <key>category_mask</key>
+                        <integer>0</integer>
+                        <key>collision_mask</key>
+                        <integer>0</integer>
+                        <key>contact_test_mask</key>
+                        <integer>0</integer>
+                        <key>fixture_type</key>
+                        <string>POLYGON</string>
+                        
+                        <key>polygons</key>
+                        <array>
+                            <array>
+                                <string>{ 57.00000,38.00000 }</string>
+                                <string>{ 59.00000,-43.00000 }</string>
+                                <string>{ 40.00000,-60.00000 }</string>
+                                <string>{ -42.00000,-59.00000 }</string>
+                                <string>{ -59.00000,-41.00000 }</string>
+                                <string>{ -61.00000,37.00000 }</string>
+                                <string>{ -39.00000,60.00000 }</string>
+                                <string>{ 42.00000,61.00000 }</string>
+                            </array>
+                        </array>
+                        
+                    </dict>
+
+                </array>
+            </dict>
+
+        </dict>
+    </dict>
+</plist>
+
+
+
+
diff --git a/BB_Bomb/Resources/res/BB_Bomb/physicsBody/physics.plist b/BB_Bomb/Resources/res/BB_Bomb/physicsBody/physics.plist
new file mode 100644
index 0000000..a256e89
--- /dev/null
+++ b/BB_Bomb/Resources/res/BB_Bomb/physicsBody/physics.plist
@@ -0,0 +1,247 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
+<plist version="1.0">
+    <dict>
+        <key>metadata</key>
+        <dict>
+            <key>format</key>
+            <integer>1</integer>
+        </dict>
+        <key>category_names</key>
+        <array>
+        </array>
+        <key>bodies</key>
+        <dict>
+
+            <key>triangle</key>
+            <dict>
+                <key>anchorpoint</key>
+                <string>{ 0.50000,0.50000 }</string>
+                <key>is_dynamic</key>
+                <false/>
+                <key>affected_by_gravity</key>
+                <false/>
+                <key>allows_rotation</key>
+                <false/>
+                <key>linear_damping</key>
+                <real>0</real>
+                <key>velocity_limit</key>
+                <real>1e+6</real>
+                <key>angular_damping</key>
+                <real>0</real>
+                <key>angular_velocity_limit</key>
+                <real>1e+6</real>
+                <key>fixtures</key>
+                <array>
+
+                    <dict>
+                        <key>density</key>
+                        <real>1</real>
+                        <key>restitution</key>
+                        <real>1</real>
+                        <key>friction</key>
+                        <real>0</real>
+                        <key>tag</key>
+                        <integer>0</integer>
+                        <key>group</key>
+                        <integer>0</integer>
+                        <key>category_mask</key>
+                        <integer>0</integer>
+                        <key>collision_mask</key>
+                        <integer>0</integer>
+                        <key>contact_test_mask</key>
+                        <integer>0</integer>
+                        <key>fixture_type</key>
+                        <string>POLYGON</string>
+                        
+                        <key>polygons</key>
+                        <array>
+                            <array>
+                                <string>{ 38.00000,-38.00000 }</string>
+                                <string>{ -38.00000,-38.00000 }</string>
+                                <string>{ 0.00000,38.00000 }</string>
+                            </array>
+                        </array>
+                        
+                    </dict>
+
+                </array>
+            </dict>
+
+            <key>otagon</key>
+            <dict>
+                <key>anchorpoint</key>
+                <string>{ 0.50000,0.50000 }</string>
+                <key>is_dynamic</key>
+                <false/>
+                <key>affected_by_gravity</key>
+                <false/>
+                <key>allows_rotation</key>
+                <false/>
+                <key>linear_damping</key>
+                <real>0</real>
+                <key>velocity_limit</key>
+                <real>1e+6</real>
+                <key>angular_damping</key>
+                <real>0</real>
+                <key>angular_velocity_limit</key>
+                <real>1e+6</real>
+                <key>fixtures</key>
+                <array>
+
+                    <dict>
+                        <key>density</key>
+                        <real>1</real>
+                        <key>restitution</key>
+                        <real>1</real>
+                        <key>friction</key>
+                        <real>0</real>
+                        <key>tag</key>
+                        <integer>0</integer>
+                        <key>group</key>
+                        <integer>0</integer>
+                        <key>category_mask</key>
+                        <integer>0</integer>
+                        <key>collision_mask</key>
+                        <integer>0</integer>
+                        <key>contact_test_mask</key>
+                        <integer>0</integer>
+                        <key>fixture_type</key>
+                        <string>POLYGON</string>
+                        
+                        <key>polygons</key>
+                        <array>
+                            <array>
+                                <string>{ -38.00000,-24.00000 }</string>
+                                <string>{ -38.00000,25.00000 }</string>
+                                <string>{ -25.00000,38.00000 }</string>
+                                <string>{ 25.00000,38.00000 }</string>
+                                <string>{ 38.00000,25.00000 }</string>
+                                <string>{ 38.00000,-25.00000 }</string>
+                                <string>{ 25.00000,-38.00000 }</string>
+                                <string>{ -24.00000,-38.00000 }</string>
+                            </array>
+                        </array>
+                        
+                    </dict>
+
+                </array>
+            </dict>
+
+            <key>cube</key>
+            <dict>
+                <key>anchorpoint</key>
+                <string>{ 0.50000,0.50000 }</string>
+                <key>is_dynamic</key>
+                <false/>
+                <key>affected_by_gravity</key>
+                <false/>
+                <key>allows_rotation</key>
+                <false/>
+                <key>linear_damping</key>
+                <real>0</real>
+                <key>velocity_limit</key>
+                <real>1e+6</real>
+                <key>angular_damping</key>
+                <real>0</real>
+                <key>angular_velocity_limit</key>
+                <real>1e+6</real>
+                <key>fixtures</key>
+                <array>
+
+                    <dict>
+                        <key>density</key>
+                        <real>1</real>
+                        <key>restitution</key>
+                        <real>1</real>
+                        <key>friction</key>
+                        <real>0</real>
+                        <key>tag</key>
+                        <integer>0</integer>
+                        <key>group</key>
+                        <integer>0</integer>
+                        <key>category_mask</key>
+                        <integer>0</integer>
+                        <key>collision_mask</key>
+                        <integer>0</integer>
+                        <key>contact_test_mask</key>
+                        <integer>0</integer>
+                        <key>fixture_type</key>
+                        <string>POLYGON</string>
+                        
+                        <key>polygons</key>
+                        <array>
+                            <array>
+                                <string>{ -38.00000,-38.00000 }</string>
+                                <string>{ -38.00000,38.00000 }</string>
+                                <string>{ 38.00000,38.00000 }</string>
+                                <string>{ 38.00000,-38.00000 }</string>
+                            </array>
+                        </array>
+                        
+                    </dict>
+
+                </array>
+            </dict>
+
+            <key>ball</key>
+            <dict>
+                <key>anchorpoint</key>
+                <string>{ 0.50000,0.50000 }</string>
+                <key>is_dynamic</key>
+                <false/>
+                <key>affected_by_gravity</key>
+                <false/>
+                <key>allows_rotation</key>
+                <true/>
+                <key>linear_damping</key>
+                <real>0</real>
+                <key>velocity_limit</key>
+                <real>1e+6</real>
+                <key>angular_damping</key>
+                <real>0</real>
+                <key>angular_velocity_limit</key>
+                <real>1e+6</real>
+                <key>fixtures</key>
+                <array>
+
+                    <dict>
+                        <key>density</key>
+                        <real>0</real>
+                        <key>restitution</key>
+                        <real>1</real>
+                        <key>friction</key>
+                        <real>0</real>
+                        <key>tag</key>
+                        <integer>0</integer>
+                        <key>group</key>
+                        <integer>0</integer>
+                        <key>category_mask</key>
+                        <integer>0</integer>
+                        <key>collision_mask</key>
+                        <integer>0</integer>
+                        <key>contact_test_mask</key>
+                        <integer>0</integer>
+                        <key>fixture_type</key>
+                        <string>CIRCLE</string>
+                        
+                        <key>circle</key>
+                        <dict>
+                            <key>radius</key>
+                            <real>16.941</real>
+                            <key>position</key>
+                            <string>{ 0.000,0.033 }</string>
+                        </dict>
+                        
+                    </dict>
+
+                </array>
+            </dict>
+
+        </dict>
+    </dict>
+</plist>
+
+
+
+
